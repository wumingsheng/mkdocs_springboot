{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs \u00b6 For full documentation visit mkdocs.org . Commands \u00b6 mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs help - Print this help message. Project layout \u00b6 1 2 3 4 mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Home"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs help - Print this help message.","title":"Commands"},{"location":"#project-layout","text":"1 2 3 4 mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"autowired-2-list/","text":"Spring @Autowired \u6ce8\u5165\u5230List\u548cMap \u00b6 \u9700\u6c42 \u00b6 \u9700\u6c42 \u5bf9\u5546\u54c1\u8fdb\u884c\u4ef7\u683c\u8ba1\u7b97\uff0c\u8ba1\u7b97\u4ef7\u683c\u8bbe\u8ba1\u5230\u5230\u5143\u7d20\u662f\u4e0d\u56fa\u5b9a\u5230\u3002\u6709\u5230\u5546\u54c1\u6d89\u53ca\u5230\u4f18\u60e0\u5377\u6709\u5230\u5546\u54c1\u6d89\u53ca\u5230\u56e2\u8d2d\uff0c\u6709\u5230\u5546\u54c1\u5168\u90fd\u6d89\u53ca\u5230\u3002 \u6bcf\u4e00\u4e2a\u73af\u8282\u8ba1\u7b97\u5b8c\u6210\u4ee5\u540e\uff0c\u8981\u628a\u4ef7\u683c\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u73af\u8282\u63a5\u7740\u8ba1\u7b97\u3002 \u62bd\u8c61\u51fa\u4e00\u4e2a\u6a21\u578b\u5c31\u662f\u6d41\u6c34\u7ebfpipeline\uff0c\u4e00\u4e2a\u9636\u6bb5\u4e00\u4e2a\u9636\u6bb5\u5904\u7406\uff0c\u4e0a\u4e00\u4e2a\u9636\u6bb5\u5904\u7406\u5b8c\u6210\u4ee5\u540e\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u9636\u6bb5 Spring\u5b9e\u73b0pipeline \u00b6 \u5b9e\u73b0\u65b9\u5f0f Spring \u4f7f\u7528 @Autowired + @Order \u5b9e\u73b0\u540c\u4e00\u7c7b\u578b\u7684\u5b9e\u4f8b\u6ce8\u5165\u5230\u96c6\u5408\uff08List or Map\uff09 \u5b9a\u4e49\u7c7b\u578b\u63a5\u53e3 1 2 3 4 5 6 7 public interface PriceCommonProcessor { public Integer process ( Integer lastPrice ); } A\u9636\u6bb5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import org.springframework.core.annotation.Order ; import org.springframework.stereotype.Component ; import lombok.extern.slf4j.Slf4j ; @Component @Order ( 1 ) @Slf4j public class A_Processor implements PriceCommonProcessor { @Override public Integer process ( Integer lastPrice ) { log . info ( \"A >>>> processor\" ); return lastPrice - 100 ; } } B\u9636\u6bb5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import org.springframework.core.annotation.Order ; import org.springframework.stereotype.Component ; import lombok.extern.slf4j.Slf4j ; @Component @Order ( 2 ) @Slf4j public class B_Processor implements PriceCommonProcessor { @Override public Integer process ( Integer lastPrice ) { log . info ( \"B >>>> processor\" ); return lastPrice - 200 ; } } C\u9636\u6bb5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import org.springframework.core.annotation.Order ; import org.springframework.stereotype.Component ; import lombok.extern.slf4j.Slf4j ; @Component @Order ( 3 ) @Slf4j public class C_Processor implements PriceCommonProcessor { @Override public Integer process ( Integer lastPrice ) { log . info ( \"C >>>> processor\" ); return lastPrice - 300 ; } } \u4f7f\u7528\u53ca\u6d4b\u8bd5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 import java.util.List ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.web.bind.annotation.GetMapping ; import org.springframework.web.bind.annotation.RestController ; import com.example.demo.processor.PriceCommonProcessor ; @RestController public class TestController { @Autowired private List < PriceCommonProcessor > list ; @GetMapping ( \"dd\" ) public Integer getPrice ( Integer lastPrice ) { for ( PriceCommonProcessor processor : list ) { lastPrice = processor . process ( lastPrice ); } return lastPrice ; } } \u6267\u884c\u547d\u4ee4 $ curl 'localhost:8080/dd?lastPrice=1000' \u63a7\u5236\u53f0\u65e5\u5fd7\u8f93\u51fa A >>>> processor B >>>> processor C >>>> processor @Autowired \u53ef\u4ee5\u76f4\u63a5\u6ce8\u5165\u540c\u4e00type\u7684\u5b9e\u4f8b\u5230list\uff0c\u6ce8\u5165\u7684\u987a\u5e8f\u5c31\u662f\u88ab @Order \u6807\u8bb0\u5230\u987a\u5e8f\uff0c\u4ece\u800c\u5f62\u6210pipeline\u6a21\u578b \u4e0d\u4ec5\u53ef\u4ee5\u987a\u5e8f\u6ce8\u5165\u5230 List \uff0c \u8fd8\u53ef\u4ee5\u6ce8\u5165\u5230 Map 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 import java.util.List ; import java.util.Map ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.web.bind.annotation.GetMapping ; import org.springframework.web.bind.annotation.RestController ; import com.example.demo.processor.PriceCommonProcessor ; import lombok.extern.slf4j.Slf4j ; @RestController @Slf4j public class TestController { @Autowired private List < PriceCommonProcessor > list ; @Autowired private Map < String , PriceCommonProcessor > map ; @GetMapping ( \"dd\" ) public Integer getPrice ( Integer lastPrice ) { map . entrySet (). forEach ( e -> { log . info ( \"{}--->>{}\" , e . getKey (), e . getValue (). getClass (). getName () ); }); return 1 ; } } a_Processor\u2014>>com.example.demo.processor.A_Processor b_Processor\u2014>>com.example.demo.processor.B_Processor c_Processor\u2014>>com.example.demo.processor.C_Processor","title":"pipeline"},{"location":"autowired-2-list/#spring-autowired-listmap","text":"","title":"Spring @Autowired \u6ce8\u5165\u5230List\u548cMap"},{"location":"autowired-2-list/#_1","text":"\u9700\u6c42 \u5bf9\u5546\u54c1\u8fdb\u884c\u4ef7\u683c\u8ba1\u7b97\uff0c\u8ba1\u7b97\u4ef7\u683c\u8bbe\u8ba1\u5230\u5230\u5143\u7d20\u662f\u4e0d\u56fa\u5b9a\u5230\u3002\u6709\u5230\u5546\u54c1\u6d89\u53ca\u5230\u4f18\u60e0\u5377\u6709\u5230\u5546\u54c1\u6d89\u53ca\u5230\u56e2\u8d2d\uff0c\u6709\u5230\u5546\u54c1\u5168\u90fd\u6d89\u53ca\u5230\u3002 \u6bcf\u4e00\u4e2a\u73af\u8282\u8ba1\u7b97\u5b8c\u6210\u4ee5\u540e\uff0c\u8981\u628a\u4ef7\u683c\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u73af\u8282\u63a5\u7740\u8ba1\u7b97\u3002 \u62bd\u8c61\u51fa\u4e00\u4e2a\u6a21\u578b\u5c31\u662f\u6d41\u6c34\u7ebfpipeline\uff0c\u4e00\u4e2a\u9636\u6bb5\u4e00\u4e2a\u9636\u6bb5\u5904\u7406\uff0c\u4e0a\u4e00\u4e2a\u9636\u6bb5\u5904\u7406\u5b8c\u6210\u4ee5\u540e\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u9636\u6bb5","title":"\u9700\u6c42"},{"location":"autowired-2-list/#springpipeline","text":"\u5b9e\u73b0\u65b9\u5f0f Spring \u4f7f\u7528 @Autowired + @Order \u5b9e\u73b0\u540c\u4e00\u7c7b\u578b\u7684\u5b9e\u4f8b\u6ce8\u5165\u5230\u96c6\u5408\uff08List or Map\uff09 \u5b9a\u4e49\u7c7b\u578b\u63a5\u53e3 1 2 3 4 5 6 7 public interface PriceCommonProcessor { public Integer process ( Integer lastPrice ); } A\u9636\u6bb5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import org.springframework.core.annotation.Order ; import org.springframework.stereotype.Component ; import lombok.extern.slf4j.Slf4j ; @Component @Order ( 1 ) @Slf4j public class A_Processor implements PriceCommonProcessor { @Override public Integer process ( Integer lastPrice ) { log . info ( \"A >>>> processor\" ); return lastPrice - 100 ; } } B\u9636\u6bb5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import org.springframework.core.annotation.Order ; import org.springframework.stereotype.Component ; import lombok.extern.slf4j.Slf4j ; @Component @Order ( 2 ) @Slf4j public class B_Processor implements PriceCommonProcessor { @Override public Integer process ( Integer lastPrice ) { log . info ( \"B >>>> processor\" ); return lastPrice - 200 ; } } C\u9636\u6bb5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import org.springframework.core.annotation.Order ; import org.springframework.stereotype.Component ; import lombok.extern.slf4j.Slf4j ; @Component @Order ( 3 ) @Slf4j public class C_Processor implements PriceCommonProcessor { @Override public Integer process ( Integer lastPrice ) { log . info ( \"C >>>> processor\" ); return lastPrice - 300 ; } } \u4f7f\u7528\u53ca\u6d4b\u8bd5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 import java.util.List ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.web.bind.annotation.GetMapping ; import org.springframework.web.bind.annotation.RestController ; import com.example.demo.processor.PriceCommonProcessor ; @RestController public class TestController { @Autowired private List < PriceCommonProcessor > list ; @GetMapping ( \"dd\" ) public Integer getPrice ( Integer lastPrice ) { for ( PriceCommonProcessor processor : list ) { lastPrice = processor . process ( lastPrice ); } return lastPrice ; } } \u6267\u884c\u547d\u4ee4 $ curl 'localhost:8080/dd?lastPrice=1000' \u63a7\u5236\u53f0\u65e5\u5fd7\u8f93\u51fa A >>>> processor B >>>> processor C >>>> processor @Autowired \u53ef\u4ee5\u76f4\u63a5\u6ce8\u5165\u540c\u4e00type\u7684\u5b9e\u4f8b\u5230list\uff0c\u6ce8\u5165\u7684\u987a\u5e8f\u5c31\u662f\u88ab @Order \u6807\u8bb0\u5230\u987a\u5e8f\uff0c\u4ece\u800c\u5f62\u6210pipeline\u6a21\u578b \u4e0d\u4ec5\u53ef\u4ee5\u987a\u5e8f\u6ce8\u5165\u5230 List \uff0c \u8fd8\u53ef\u4ee5\u6ce8\u5165\u5230 Map 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 import java.util.List ; import java.util.Map ; import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.web.bind.annotation.GetMapping ; import org.springframework.web.bind.annotation.RestController ; import com.example.demo.processor.PriceCommonProcessor ; import lombok.extern.slf4j.Slf4j ; @RestController @Slf4j public class TestController { @Autowired private List < PriceCommonProcessor > list ; @Autowired private Map < String , PriceCommonProcessor > map ; @GetMapping ( \"dd\" ) public Integer getPrice ( Integer lastPrice ) { map . entrySet (). forEach ( e -> { log . info ( \"{}--->>{}\" , e . getKey (), e . getValue (). getClass (). getName () ); }); return 1 ; } } a_Processor\u2014>>com.example.demo.processor.A_Processor b_Processor\u2014>>com.example.demo.processor.B_Processor c_Processor\u2014>>com.example.demo.processor.C_Processor","title":"Spring\u5b9e\u73b0pipeline"},{"location":"guava/","text":"guava-retry\u91cd\u8bd5\u673a\u5236 \u00b6 1 2 3 4 5 <dependency> <groupId> com.github.rholder </groupId> <artifactId> guava-retrying </artifactId> <version> 2.0.0 </version> </dependency> 1 2 3 4 5 6 7 8 9 10 Retryer < Boolean > retryer = RetryerBuilder .< Boolean > newBuilder () . retryIfResult ( Predicates . equalTo ( false )) . retryIfRuntimeException () . retryIfException () . withStopStrategy ( StopStrategies . neverStop ()) . build (); retryer . call (()->{ scene . setSceneKey ( IDUtil . verifyCode ()); return sceneService . save ( scene ); }); \u5b57\u7b26\u4e32\u5207\u5272Splitter \u00b6 1 2 3 4 5 List < String > bigbayAppIdList = Splitter . on ( \",\" ) . omitEmptyStrings () . trimResults () . splitToList ( \"123,fjdi, 88,99 , , 8 9 \" ) . forEach ( System . out :: println ); \u8fd0\u884c\u7ed3\u679c 123 fjdi 88 99 8 9 \u62c6\u5206\u5668\u5de5\u5382 \u65b9\u6cd5 \u63cf\u8ff0 \u8303\u4f8b Splitter.on(char) \u6309\u5355\u4e2a\u5b57\u7b26\u62c6\u5206 Splitter.on(\u2018;\u2019) Splitter.on(CharMatcher) \u6309\u5b57\u7b26\u5339\u914d\u5668\u62c6\u5206 Splitter.on(CharMatcher.BREAKING_WHITESPACE) Splitter.on(String) \u6309\u5b57\u7b26\u4e32\u62c6\u5206 Splitter.on(\u201c, \u201c) Splitter.on(Pattern) Splitter.onPattern(String) \u6309\u6b63\u5219\u8868\u8fbe\u5f0f\u62c6\u5206 Splitter.onPattern(\u201c\\r?\\n\u201d) Splitter.fixedLength(int) \u6309\u56fa\u5b9a\u957f\u5ea6\u62c6\u5206\uff1b\u6700\u540e\u4e00\u6bb5\u53ef\u80fd\u6bd4\u7ed9\u5b9a\u957f\u5ea6\u77ed\uff0c\u4f46\u4e0d\u4f1a\u4e3a\u7a7a\u3002 Splitter.fixedLength(3) \u62c6\u5206\u5668\u4fee\u9970\u7b26 \u65b9\u6cd5 \u63cf\u8ff0 omitEmptyStrings() \u4ece\u7ed3\u679c\u4e2d\u81ea\u52a8\u5ffd\u7565\u7a7a\u5b57\u7b26\u4e32 trimResults() \u79fb\u9664\u7ed3\u679c\u5b57\u7b26\u4e32\u7684\u524d\u5bfc\u7a7a\u767d\u548c\u5c3e\u90e8\u7a7a\u767d trimResults(CharMatcher) \u7ed9\u5b9a\u5339\u914d\u5668\uff0c\u79fb\u9664\u7ed3\u679c\u5b57\u7b26\u4e32\u7684\u524d\u5bfc\u5339\u914d\u5b57\u7b26\u548c\u5c3e\u90e8\u5339\u914d\u5b57\u7b26 limit(int) \u9650\u5236\u62c6\u5206\u51fa\u7684\u5b57\u7b26\u4e32\u6570\u91cf","title":"guava"},{"location":"guava/#guava-retry","text":"1 2 3 4 5 <dependency> <groupId> com.github.rholder </groupId> <artifactId> guava-retrying </artifactId> <version> 2.0.0 </version> </dependency> 1 2 3 4 5 6 7 8 9 10 Retryer < Boolean > retryer = RetryerBuilder .< Boolean > newBuilder () . retryIfResult ( Predicates . equalTo ( false )) . retryIfRuntimeException () . retryIfException () . withStopStrategy ( StopStrategies . neverStop ()) . build (); retryer . call (()->{ scene . setSceneKey ( IDUtil . verifyCode ()); return sceneService . save ( scene ); });","title":"guava-retry\u91cd\u8bd5\u673a\u5236"},{"location":"guava/#splitter","text":"1 2 3 4 5 List < String > bigbayAppIdList = Splitter . on ( \",\" ) . omitEmptyStrings () . trimResults () . splitToList ( \"123,fjdi, 88,99 , , 8 9 \" ) . forEach ( System . out :: println ); \u8fd0\u884c\u7ed3\u679c 123 fjdi 88 99 8 9 \u62c6\u5206\u5668\u5de5\u5382 \u65b9\u6cd5 \u63cf\u8ff0 \u8303\u4f8b Splitter.on(char) \u6309\u5355\u4e2a\u5b57\u7b26\u62c6\u5206 Splitter.on(\u2018;\u2019) Splitter.on(CharMatcher) \u6309\u5b57\u7b26\u5339\u914d\u5668\u62c6\u5206 Splitter.on(CharMatcher.BREAKING_WHITESPACE) Splitter.on(String) \u6309\u5b57\u7b26\u4e32\u62c6\u5206 Splitter.on(\u201c, \u201c) Splitter.on(Pattern) Splitter.onPattern(String) \u6309\u6b63\u5219\u8868\u8fbe\u5f0f\u62c6\u5206 Splitter.onPattern(\u201c\\r?\\n\u201d) Splitter.fixedLength(int) \u6309\u56fa\u5b9a\u957f\u5ea6\u62c6\u5206\uff1b\u6700\u540e\u4e00\u6bb5\u53ef\u80fd\u6bd4\u7ed9\u5b9a\u957f\u5ea6\u77ed\uff0c\u4f46\u4e0d\u4f1a\u4e3a\u7a7a\u3002 Splitter.fixedLength(3) \u62c6\u5206\u5668\u4fee\u9970\u7b26 \u65b9\u6cd5 \u63cf\u8ff0 omitEmptyStrings() \u4ece\u7ed3\u679c\u4e2d\u81ea\u52a8\u5ffd\u7565\u7a7a\u5b57\u7b26\u4e32 trimResults() \u79fb\u9664\u7ed3\u679c\u5b57\u7b26\u4e32\u7684\u524d\u5bfc\u7a7a\u767d\u548c\u5c3e\u90e8\u7a7a\u767d trimResults(CharMatcher) \u7ed9\u5b9a\u5339\u914d\u5668\uff0c\u79fb\u9664\u7ed3\u679c\u5b57\u7b26\u4e32\u7684\u524d\u5bfc\u5339\u914d\u5b57\u7b26\u548c\u5c3e\u90e8\u5339\u914d\u5b57\u7b26 limit(int) \u9650\u5236\u62c6\u5206\u51fa\u7684\u5b57\u7b26\u4e32\u6570\u91cf","title":"\u5b57\u7b26\u4e32\u5207\u5272Splitter"},{"location":"okhttp/","text":"springboot \u6574\u5408 okhttp3 \u00b6 Tip okhttp3 + kotlin = okhttp4 1. \u6dfb\u52a0pom\u4f9d\u8d56 \u00b6 1 2 3 4 5 6 7 8 9 <dependency> <groupId> com.squareup.okhttp3 </groupId> <artifactId> okhttp </artifactId> <version> 3.14.2 </version> </dependency> <dependency> <groupId> org.apache.commons </groupId> <artifactId> commons-lang3 </artifactId> </dependency> 2. \u914d\u7f6e\u7c7b \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 package com.example.demo.config ; import java.security.KeyManagementException ; import java.security.NoSuchAlgorithmException ; import java.security.SecureRandom ; import java.security.cert.CertificateException ; import java.security.cert.X509Certificate ; import java.util.concurrent.TimeUnit ; import javax.net.ssl.SSLContext ; import javax.net.ssl.SSLSocketFactory ; import javax.net.ssl.TrustManager ; import javax.net.ssl.X509TrustManager ; import okhttp3.ConnectionPool ; import okhttp3.OkHttpClient ; import org.springframework.context.annotation.Bean ; import org.springframework.context.annotation.Configuration ; @Configuration public class OkHttpConfig { @Bean public X509TrustManager x509TrustManager () { return new X509TrustManager () { @Override public void checkClientTrusted ( X509Certificate [] arg0 , String arg1 ) throws CertificateException { // TODO Auto-generated method stub } @Override public void checkServerTrusted ( X509Certificate [] arg0 , String arg1 ) throws CertificateException { // TODO Auto-generated method stub } @Override public X509Certificate [] getAcceptedIssuers () { return new X509Certificate [ 0 ]; } }; } @Bean public SSLSocketFactory sslSocketFactory () { try { //\u4fe1\u4efb\u4efb\u4f55\u94fe\u63a5 SSLContext sslContext = SSLContext . getInstance ( \"TLS\" ); sslContext . init ( null , new TrustManager []{ x509TrustManager ()}, new SecureRandom ()); return sslContext . getSocketFactory (); } catch ( NoSuchAlgorithmException e ) { e . printStackTrace (); } catch ( KeyManagementException e ) { e . printStackTrace (); } return null ; } /** * Create a new connection pool with tuning parameters appropriate for a single-user application. * The tuning parameters in this pool are subject to change in future OkHttp releases. Currently */ @Bean public ConnectionPool pool () { return new ConnectionPool ( 200 , 5 , TimeUnit . MINUTES ); } @Bean public OkHttpClient okHttpClient () { return new OkHttpClient . Builder () . sslSocketFactory ( sslSocketFactory (), x509TrustManager ()) . retryOnConnectionFailure ( false ) //\u662f\u5426\u5f00\u542f\u7f13\u5b58 . connectionPool ( pool ()) //\u8fde\u63a5\u6c60 . connectTimeout ( 10L , TimeUnit . SECONDS ) . readTimeout ( 10L , TimeUnit . SECONDS ) . build (); } } 3. \u5de5\u5177\u7c7b \u00b6 3.1 SpringUtil \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 package com.example.demo.util ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.springframework.beans.BeansException ; import org.springframework.context.ApplicationContext ; import org.springframework.context.ApplicationContextAware ; public class SpringUtil implements ApplicationContextAware { private static ApplicationContext applicationContext ; private static final Logger logger = LoggerFactory . getLogger ( SpringUtil . class ); @Override public void setApplicationContext ( ApplicationContext applicationContext ) throws BeansException { if ( SpringUtil . applicationContext == null ) { SpringUtil . applicationContext = applicationContext ; } logger . info ( \"========ApplicationContext\u914d\u7f6e\u6210\u529f,\u5728\u666e\u901a\u7c7b\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528SpringUtils.getAppContext()\u83b7\u53d6applicationContext\u5bf9\u8c61,applicationContext=\" + SpringUtil . applicationContext + \"========\" ); logger . info ( \"---------------------------------------------------------------------\" ); } //\u83b7\u53d6applicationContext public static ApplicationContext getApplicationContext () { return applicationContext ; } //\u901a\u8fc7name\u83b7\u53d6 Bean. public static Object getBean ( String name ){ return getApplicationContext (). getBean ( name ); } //\u901a\u8fc7class\u83b7\u53d6Bean. public static < T > T getBean ( Class < T > clazz ){ return getApplicationContext (). getBean ( clazz ); } //\u901a\u8fc7name,\u4ee5\u53caClazz\u8fd4\u56de\u6307\u5b9a\u7684Bean public static < T > T getBean ( String name , Class < T > clazz ){ return getApplicationContext (). getBean ( name , clazz ); } } 3.2 OkHttpUtil \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 package com.example.demo.util ; import java.util.Iterator ; import java.util.Map ; import java.util.Map.Entry ; import okhttp3.FormBody ; import okhttp3.MediaType ; import okhttp3.OkHttpClient ; import okhttp3.Request ; import okhttp3.RequestBody ; import okhttp3.Response ; import org.apache.commons.lang3.exception.ExceptionUtils ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class OkHttpUtil { private static final Logger logger = LoggerFactory . getLogger ( OkHttpUtil . class ); /** * \u6839\u636emap\u83b7\u53d6get\u8bf7\u6c42\u53c2\u6570 * @param queries * @return */ public static StringBuffer getQueryString ( String url , Map < String , String > queries ){ StringBuffer sb = new StringBuffer ( url ); if ( queries != null && queries . keySet (). size () > 0 ) { boolean firstFlag = true ; Iterator < Entry < String , String >> iterator = queries . entrySet (). iterator (); while ( iterator . hasNext ()) { Entry < String , String > entry = ( Map . Entry < String , String >) iterator . next (); if ( firstFlag ) { sb . append ( \"?\" + entry . getKey () + \"=\" + entry . getValue ()); firstFlag = false ; } else { sb . append ( \"&\" + entry . getKey () + \"=\" + entry . getValue ()); } } } return sb ; } /** * \u8c03\u7528okhttp\u7684newCall\u65b9\u6cd5 * @param request * @return */ private static String execNewCall ( Request request ){ Response response = null ; try { OkHttpClient okHttpClient = SpringUtil . getBean ( OkHttpClient . class ); response = okHttpClient . newCall ( request ). execute (); //int code = response.code(); if ( response . isSuccessful ()) { return response . body (). string (); } } catch ( Exception e ) { logger . error ( \"okhttp3 put error >> ex = {}\" , ExceptionUtils . getStackTrace ( e )); } finally { if ( response != null ) { response . close (); } } return \"\" ; } /** * get * @param url \u8bf7\u6c42\u7684url * @param queries \u8bf7\u6c42\u7684\u53c2\u6570\uff0c\u5728\u6d4f\u89c8\u5668\uff1f\u540e\u9762\u7684\u6570\u636e\uff0c\u6ca1\u6709\u53ef\u4ee5\u4f20null * @return */ public static String get ( String url , Map < String , String > queries ) { StringBuffer sb = getQueryString ( url , queries ); Request request = new Request . Builder () . url ( sb . toString ()) . build (); return execNewCall ( request ); } /** * post * * @param url \u8bf7\u6c42\u7684url * @param params post form \u63d0\u4ea4\u7684\u53c2\u6570 * @return */ public static String postFormParams ( String url , Map < String , String > params ) { FormBody . Builder builder = new FormBody . Builder (); //\u6dfb\u52a0\u53c2\u6570 if ( params != null && params . keySet (). size () > 0 ) { for ( String key : params . keySet ()) { builder . add ( key , params . get ( key )); } } Request request = new Request . Builder () . url ( url ) . post ( builder . build ()) . build (); return execNewCall ( request ); } /** * Post\u8bf7\u6c42\u53d1\u9001JSON\u6570\u636e....{\"name\":\"zhangsan\",\"pwd\":\"123456\"} * \u53c2\u6570\u4e00\uff1a\u8bf7\u6c42Url * \u53c2\u6570\u4e8c\uff1a\u8bf7\u6c42\u7684JSON * \u53c2\u6570\u4e09\uff1a\u8bf7\u6c42\u56de\u8c03 */ public static String postJsonParams ( String url , String jsonParams ) { RequestBody requestBody = RequestBody . create ( MediaType . parse ( \"application/json; charset=utf-8\" ), jsonParams ); Request request = new Request . Builder () . url ( url ) . post ( requestBody ) . build (); return execNewCall ( request ); } /** * Post\u8bf7\u6c42\u53d1\u9001xml\u6570\u636e.... * \u53c2\u6570\u4e00\uff1a\u8bf7\u6c42Url * \u53c2\u6570\u4e8c\uff1a\u8bf7\u6c42\u7684xmlString * \u53c2\u6570\u4e09\uff1a\u8bf7\u6c42\u56de\u8c03 */ public static String postXmlParams ( String url , String xml ) { RequestBody requestBody = RequestBody . create ( MediaType . parse ( \"application/xml; charset=utf-8\" ), xml ); Request request = new Request . Builder () . url ( url ) . post ( requestBody ) . build (); return execNewCall ( request ); } } 4. \u4f7f\u7528\u65b9\u5f0f \u00b6 Note OkHttpUtil\u5185\u90fd\u662f\u9759\u6001\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 StringUtil\u9700\u8981\u5b9e\u4f8b\u5316\uff0c\u5b9e\u4f8b\u5316\u4e24\u79cd\u7ed3\u6784\u4e09\u79cd\u65b9\u5f0f\uff1a StringUtil\u5728\u7c7b\u626b\u63cf\u8def\u5f84\u4e0b\uff0c\u76f4\u63a5\u5728StringUtil\u4e0a\u52a0\u6ce8\u89e3 @Component \u6216\u8005 @Configuration StringUtil\u4e0d\u5728\u7c7b\u626b\u63cf\u8def\u5f84\u4e0b\uff1a\u6709\u5982\u4e0b\u4e24\u79cd\u65b9\u5f0f 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 import org.springframework.boot.SpringApplication ; import org.springframework.boot.autoconfigure.SpringBootApplication ; import org.springframework.context.annotation.Import ; import com.example.demo.util.SpringUtil ; @SpringBootApplication @Import ( SpringUtil . class ) //\u65b9\u5f0f\u4e00 public class DemoApplication { //\u65b9\u5f0f\u4e8c /*@Bean public SpringUtil getSpringUtil() { return new SpringUtil(); }*/ public static void main ( String [] args ) { SpringApplication . run ( DemoApplication . class , args ); } }","title":"okhttp"},{"location":"okhttp/#springboot-okhttp3","text":"Tip okhttp3 + kotlin = okhttp4","title":"springboot \u6574\u5408 okhttp3"},{"location":"okhttp/#1-pom","text":"1 2 3 4 5 6 7 8 9 <dependency> <groupId> com.squareup.okhttp3 </groupId> <artifactId> okhttp </artifactId> <version> 3.14.2 </version> </dependency> <dependency> <groupId> org.apache.commons </groupId> <artifactId> commons-lang3 </artifactId> </dependency>","title":"1. \u6dfb\u52a0pom\u4f9d\u8d56"},{"location":"okhttp/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 package com.example.demo.config ; import java.security.KeyManagementException ; import java.security.NoSuchAlgorithmException ; import java.security.SecureRandom ; import java.security.cert.CertificateException ; import java.security.cert.X509Certificate ; import java.util.concurrent.TimeUnit ; import javax.net.ssl.SSLContext ; import javax.net.ssl.SSLSocketFactory ; import javax.net.ssl.TrustManager ; import javax.net.ssl.X509TrustManager ; import okhttp3.ConnectionPool ; import okhttp3.OkHttpClient ; import org.springframework.context.annotation.Bean ; import org.springframework.context.annotation.Configuration ; @Configuration public class OkHttpConfig { @Bean public X509TrustManager x509TrustManager () { return new X509TrustManager () { @Override public void checkClientTrusted ( X509Certificate [] arg0 , String arg1 ) throws CertificateException { // TODO Auto-generated method stub } @Override public void checkServerTrusted ( X509Certificate [] arg0 , String arg1 ) throws CertificateException { // TODO Auto-generated method stub } @Override public X509Certificate [] getAcceptedIssuers () { return new X509Certificate [ 0 ]; } }; } @Bean public SSLSocketFactory sslSocketFactory () { try { //\u4fe1\u4efb\u4efb\u4f55\u94fe\u63a5 SSLContext sslContext = SSLContext . getInstance ( \"TLS\" ); sslContext . init ( null , new TrustManager []{ x509TrustManager ()}, new SecureRandom ()); return sslContext . getSocketFactory (); } catch ( NoSuchAlgorithmException e ) { e . printStackTrace (); } catch ( KeyManagementException e ) { e . printStackTrace (); } return null ; } /** * Create a new connection pool with tuning parameters appropriate for a single-user application. * The tuning parameters in this pool are subject to change in future OkHttp releases. Currently */ @Bean public ConnectionPool pool () { return new ConnectionPool ( 200 , 5 , TimeUnit . MINUTES ); } @Bean public OkHttpClient okHttpClient () { return new OkHttpClient . Builder () . sslSocketFactory ( sslSocketFactory (), x509TrustManager ()) . retryOnConnectionFailure ( false ) //\u662f\u5426\u5f00\u542f\u7f13\u5b58 . connectionPool ( pool ()) //\u8fde\u63a5\u6c60 . connectTimeout ( 10L , TimeUnit . SECONDS ) . readTimeout ( 10L , TimeUnit . SECONDS ) . build (); } }","title":"2. \u914d\u7f6e\u7c7b"},{"location":"okhttp/#3","text":"","title":"3. \u5de5\u5177\u7c7b"},{"location":"okhttp/#31-springutil","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 package com.example.demo.util ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; import org.springframework.beans.BeansException ; import org.springframework.context.ApplicationContext ; import org.springframework.context.ApplicationContextAware ; public class SpringUtil implements ApplicationContextAware { private static ApplicationContext applicationContext ; private static final Logger logger = LoggerFactory . getLogger ( SpringUtil . class ); @Override public void setApplicationContext ( ApplicationContext applicationContext ) throws BeansException { if ( SpringUtil . applicationContext == null ) { SpringUtil . applicationContext = applicationContext ; } logger . info ( \"========ApplicationContext\u914d\u7f6e\u6210\u529f,\u5728\u666e\u901a\u7c7b\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528SpringUtils.getAppContext()\u83b7\u53d6applicationContext\u5bf9\u8c61,applicationContext=\" + SpringUtil . applicationContext + \"========\" ); logger . info ( \"---------------------------------------------------------------------\" ); } //\u83b7\u53d6applicationContext public static ApplicationContext getApplicationContext () { return applicationContext ; } //\u901a\u8fc7name\u83b7\u53d6 Bean. public static Object getBean ( String name ){ return getApplicationContext (). getBean ( name ); } //\u901a\u8fc7class\u83b7\u53d6Bean. public static < T > T getBean ( Class < T > clazz ){ return getApplicationContext (). getBean ( clazz ); } //\u901a\u8fc7name,\u4ee5\u53caClazz\u8fd4\u56de\u6307\u5b9a\u7684Bean public static < T > T getBean ( String name , Class < T > clazz ){ return getApplicationContext (). getBean ( name , clazz ); } }","title":"3.1 SpringUtil"},{"location":"okhttp/#32-okhttputil","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 package com.example.demo.util ; import java.util.Iterator ; import java.util.Map ; import java.util.Map.Entry ; import okhttp3.FormBody ; import okhttp3.MediaType ; import okhttp3.OkHttpClient ; import okhttp3.Request ; import okhttp3.RequestBody ; import okhttp3.Response ; import org.apache.commons.lang3.exception.ExceptionUtils ; import org.slf4j.Logger ; import org.slf4j.LoggerFactory ; public class OkHttpUtil { private static final Logger logger = LoggerFactory . getLogger ( OkHttpUtil . class ); /** * \u6839\u636emap\u83b7\u53d6get\u8bf7\u6c42\u53c2\u6570 * @param queries * @return */ public static StringBuffer getQueryString ( String url , Map < String , String > queries ){ StringBuffer sb = new StringBuffer ( url ); if ( queries != null && queries . keySet (). size () > 0 ) { boolean firstFlag = true ; Iterator < Entry < String , String >> iterator = queries . entrySet (). iterator (); while ( iterator . hasNext ()) { Entry < String , String > entry = ( Map . Entry < String , String >) iterator . next (); if ( firstFlag ) { sb . append ( \"?\" + entry . getKey () + \"=\" + entry . getValue ()); firstFlag = false ; } else { sb . append ( \"&\" + entry . getKey () + \"=\" + entry . getValue ()); } } } return sb ; } /** * \u8c03\u7528okhttp\u7684newCall\u65b9\u6cd5 * @param request * @return */ private static String execNewCall ( Request request ){ Response response = null ; try { OkHttpClient okHttpClient = SpringUtil . getBean ( OkHttpClient . class ); response = okHttpClient . newCall ( request ). execute (); //int code = response.code(); if ( response . isSuccessful ()) { return response . body (). string (); } } catch ( Exception e ) { logger . error ( \"okhttp3 put error >> ex = {}\" , ExceptionUtils . getStackTrace ( e )); } finally { if ( response != null ) { response . close (); } } return \"\" ; } /** * get * @param url \u8bf7\u6c42\u7684url * @param queries \u8bf7\u6c42\u7684\u53c2\u6570\uff0c\u5728\u6d4f\u89c8\u5668\uff1f\u540e\u9762\u7684\u6570\u636e\uff0c\u6ca1\u6709\u53ef\u4ee5\u4f20null * @return */ public static String get ( String url , Map < String , String > queries ) { StringBuffer sb = getQueryString ( url , queries ); Request request = new Request . Builder () . url ( sb . toString ()) . build (); return execNewCall ( request ); } /** * post * * @param url \u8bf7\u6c42\u7684url * @param params post form \u63d0\u4ea4\u7684\u53c2\u6570 * @return */ public static String postFormParams ( String url , Map < String , String > params ) { FormBody . Builder builder = new FormBody . Builder (); //\u6dfb\u52a0\u53c2\u6570 if ( params != null && params . keySet (). size () > 0 ) { for ( String key : params . keySet ()) { builder . add ( key , params . get ( key )); } } Request request = new Request . Builder () . url ( url ) . post ( builder . build ()) . build (); return execNewCall ( request ); } /** * Post\u8bf7\u6c42\u53d1\u9001JSON\u6570\u636e....{\"name\":\"zhangsan\",\"pwd\":\"123456\"} * \u53c2\u6570\u4e00\uff1a\u8bf7\u6c42Url * \u53c2\u6570\u4e8c\uff1a\u8bf7\u6c42\u7684JSON * \u53c2\u6570\u4e09\uff1a\u8bf7\u6c42\u56de\u8c03 */ public static String postJsonParams ( String url , String jsonParams ) { RequestBody requestBody = RequestBody . create ( MediaType . parse ( \"application/json; charset=utf-8\" ), jsonParams ); Request request = new Request . Builder () . url ( url ) . post ( requestBody ) . build (); return execNewCall ( request ); } /** * Post\u8bf7\u6c42\u53d1\u9001xml\u6570\u636e.... * \u53c2\u6570\u4e00\uff1a\u8bf7\u6c42Url * \u53c2\u6570\u4e8c\uff1a\u8bf7\u6c42\u7684xmlString * \u53c2\u6570\u4e09\uff1a\u8bf7\u6c42\u56de\u8c03 */ public static String postXmlParams ( String url , String xml ) { RequestBody requestBody = RequestBody . create ( MediaType . parse ( \"application/xml; charset=utf-8\" ), xml ); Request request = new Request . Builder () . url ( url ) . post ( requestBody ) . build (); return execNewCall ( request ); } }","title":"3.2 OkHttpUtil"},{"location":"okhttp/#4","text":"Note OkHttpUtil\u5185\u90fd\u662f\u9759\u6001\u65b9\u6cd5\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 StringUtil\u9700\u8981\u5b9e\u4f8b\u5316\uff0c\u5b9e\u4f8b\u5316\u4e24\u79cd\u7ed3\u6784\u4e09\u79cd\u65b9\u5f0f\uff1a StringUtil\u5728\u7c7b\u626b\u63cf\u8def\u5f84\u4e0b\uff0c\u76f4\u63a5\u5728StringUtil\u4e0a\u52a0\u6ce8\u89e3 @Component \u6216\u8005 @Configuration StringUtil\u4e0d\u5728\u7c7b\u626b\u63cf\u8def\u5f84\u4e0b\uff1a\u6709\u5982\u4e0b\u4e24\u79cd\u65b9\u5f0f 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 import org.springframework.boot.SpringApplication ; import org.springframework.boot.autoconfigure.SpringBootApplication ; import org.springframework.context.annotation.Import ; import com.example.demo.util.SpringUtil ; @SpringBootApplication @Import ( SpringUtil . class ) //\u65b9\u5f0f\u4e00 public class DemoApplication { //\u65b9\u5f0f\u4e8c /*@Bean public SpringUtil getSpringUtil() { return new SpringUtil(); }*/ public static void main ( String [] args ) { SpringApplication . run ( DemoApplication . class , args ); } }","title":"4. \u4f7f\u7528\u65b9\u5f0f"},{"location":"self-define-starter/","text":"1. \u524d\u8a00 \u00b6 \u968f\u7740Spring\u7684\u65e5\u6e10\u81c3\u80bf\uff0c\u4e3a\u4e86\u7b80\u5316\u914d\u7f6e\u3001\u5f00\u7bb1\u5373\u7528\u3001\u5feb\u901f\u96c6\u6210\uff0cSpring Boot \u6a2a\u7a7a\u51fa\u4e16\u3002\u76ee\u524d\u5df2\u7ecf\u6210\u4e3a Java \u76ee\u524d\u6700\u706b\u70ed\u7684\u6846\u67b6\u4e86\u3002\u5e73\u5e38\u6211\u4eec\u7528Spring Boot\u5f00\u53d1web\u5e94\u7528\u3002Spring mvc \u9ed8\u8ba4\u4f7f\u7528tomcat servlet\u5bb9\u5668\uff0c \u56e0\u4e3aSpring mvc\u7ec4\u4ef6\u96c6\u6210\u4e86spring-boot-starter-tomcat \u3002\u4f46\u662f\u73b0\u5728undertow servlet\u5bb9\u5668\u7684\u6027\u80fd\u975e\u5e38\u597d\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5148\u6392\u9664tomcat\uff1a 1 2 3 4 5 6 7 8 9 10 <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-web </artifactId> <exclusions> <exclusion> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-tomcat </artifactId> </exclusion> </exclusions> </dependency> \u7136\u540e\u76f4\u63a5\u66ff\u6362\u4e3aundertow: 1 2 3 4 <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-undertow </artifactId> </dependency> \u4ee3\u7801\u65e0\u9700\u66f4\u6539\u3002\u8fd9\u5c31\u662f\u7ec4\u4ef6\u5316\u540e\u7684\u597d\u5904\uff1a1.\u53ef\u63d2\u62d4\u30022.\u53ef\u5b9a\u5236\u30023.\u6309\u9700\u96c6\u6210\u3002\u4e3a\u4ec0\u4e48\u80fd\u591f\u505a\u5230\u5feb\u901f\u9002\u914d\uff1f\u6211\u4eec\u8bd5\u60f3\u4e00\u4e2a\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\uff1a\u5047\u5982\u4f60\u7684\u6c7d\u8f66\u8f6e\u5b50\u4e0a\u6709\u4e2a\u87ba\u4e1d\u574f\u4e86\uff0c\u4f60\u8981\u4e70\u4e00\u4e2a\u87ba\u4e1d\u53bb\u81ea\u5df1\u88c5\u3002\u4f60\u53bb\u5e97\u91cc\u53ea\u8981\u62a5\u4e0a\u4f60\u6c7d\u8f66\u7684\u54c1\u724c\u548c\u4f4d\u7f6e\u8001\u677f\u5c31\u80fd\u51c6\u786e\u5730\u77e5\u9053\u4f60\u8981\u7528\u54ea\u79cd\u87ba\u4e1d\u3002\u8fd9\u5c31\u662f\u6807\u51c6\u5df2\u7ecf\u5236\u5b9a\u597d\u7684\u597d\u5904\u3002\u5982\u679c\u6ca1\u6709\u6807\u51c6\uff0c\u4f60\u5f88\u5bb9\u6613\u4e70\u5230\u4e0d\u914d\u5957\u7684\u87ba\u4e1d\uff0c\u4f60\u8981\u4e0d\u505c\u7684\u8bd5\u9519\u3002\u8fd9\u663e\u7136\u4e0d\u662f\u4f60\u60f3\u8981\u7684\u3002\u5982\u679c\u628a\u8fd9\u79cd\u6807\u51c6\u6f5c\u79fb\u9ed8\u5316\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u6c9f\u901a\u4e0a\u5c31\u66f4\u52a0\u5feb\u6377\u65b9\u4fbf\u3002\u6709\u65f6\u5019\u4f60\u5973\u670b\u53cb\u4e00\u4e2a\u773c\u795e\u4f60\u5c31\u77e5\u9053\u5979\u60f3\u8981\u5e72\u4ec0\u4e48\u3002\u6240\u4ee5Spring Boot \u6709\u4e00\u4e2a\u201c\u7ea6\u5b9a\u5927\u4e8e\u914d\u7f6e\u201d\u7684\u89c4\u5219\uff0c\u8ba9\u7a0b\u5e8f\u7ec4\u4ef6\u4e4b\u95f4\u6765\u51cf\u5c11\u914d\u7f6e\uff0c\u964d\u4f4e\u590d\u6742\u6027\u3002\u56e0\u6b64\u4f60\u5728\u5f00\u53d1\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684Spring Boot Starter\u7684\u65f6\u5019\u4e5f\u6700\u597d\u8003\u8651\u4f60\u7684starter\u5982\u4f55\u8fbe\u5230\u4ee5\u4e0a\u7684\u4fbf\u5229\u6027\u3002 \u4e00\u4e2a\u7ec4\u4ef6\u7684\u8bbe\u8ba1\u4e00\u5b9a\u8981\u6709\u6807\u51c6\u548c\u89c4\u5219\u3002Spring Boot Starter\u4e5f\u4e0d\u4f8b\u5916\u3002\u6211\u4eec\u6765\u770b\u770b\u4e00\u4e9b\u5e38\u89c4\u7684\u505a\u6cd5\u3002 2. spring boot \u7684\u4e00\u4e9b\u7ea6\u5b9a \u00b6 \u4e00\u4e2a\u7ec4\u4ef6\u7684\u8bbe\u8ba1\u4e00\u5b9a\u8981\u6709\u6807\u51c6\u548c\u89c4\u5219\u3002Spring Boot Starter\u4e5f\u4e0d\u4f8b\u5916\u3002\u6211\u4eec\u6765\u770b\u770b\u4e00\u4e9b\u5e38\u89c4\u7684\u505a\u6cd5\u3002 2.1 \u547d\u540d\u98ce\u683c \u00b6 \u5982\u679c\u4f60\u5feb\u6709\u5b69\u5b50\u4e86\uff0c\u51fa\u751f\u524d\u4f60\u6bd4\u8f83\u6025\u7684\u4e00\u5b9a\u662f\u8d77\u4e2a\u540d\u5b57\u3002\u59d3\u540d\u6807\u8bc6\u7740\u4f60\u548c\u4f60\u7231\u4eba\u7684\u8840\u7edf\uff0c\u4e00\u5b9a\u4e0d\u4f1a\u8d77\u9694\u58c1\u8001\u738b\u7684\u59d3\u6c0f\uff0c\u80af\u5b9a\u4f1a\u62db\u6765\u5f02\u6837\u7684\u773c\u5149\u3002\u5728maven\u4e2d\uff0cgroupId\u4ee3\u8868\u7740\u59d3\u6c0f\uff0cartifactId\u4ee3\u8868\u7740\u540d\u5b57\u3002Spring Boot\u4e5f\u662f\u6709\u4e00\u4e2a\u547d\u540d\u7684\u5efa\u8bae\u7684\u3002groupId\u4e0d\u8981\u7528\u5b98\u65b9\u7684org.springframework.boot \u800c\u8981\u7528\u4f60\u81ea\u5df1\u72ec\u7279\u7684\u3002\u5bf9\u4e8eartifactId\u7684\u547d\u540d\uff0cSpring Boot\u5b98\u65b9\u5efa\u8bae\u975e\u5b98\u65b9\u7684Starter\u547d\u540d\u683c\u5f0f\u9075\u5faa xxxx-spring-boot-starter \uff0c\u4f8b\u5982 mybatis-spring-boot-starter \u3002\u5b98\u65b9starter\u4f1a\u9075\u5faaspring-boot-starter-xxxx ,\u4f8b\u5982\u4e0a\u9762\u63d0\u5230\u7684spring-boot-starter-undertow \u3002\u5f88\u591a\u5f00\u6e90starter\u4f5c\u8005\u4f1a\u5ffd\u7565\u8fd9\u79cd\u7ea6\u5b9a\uff0c\u663e\u5f97\u4e0d\u591f\u201c\u4e13\u4e1a\u201c\u3002 3. \u81ea\u5b9a\u4e49\u4e00\u4e2aStarter \u00b6 \u63a5\u4e0b\u6765\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u7b2c\u4e09\u65b9\u77ed\u4fe1starter\uff0c\u547d\u540d\u4e3asms-spring-boot-starter \u3002\u6709\u4e00\u4e9b\u7ec6\u8282\u95ee\u9898\u9700\u8981\u8fb9\u5199\u8fb9\u6765\u4ecb\u7ecd\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7701\u7565\u4e86samples\u548ctest\u6a21\u5757\u6a21\u7248\uff1a 3.1 sms-spring-boot \u00b6 sms-spring-boot\u6784\u5efa\u4e00\u4e2a\u9879\u76ee\u91cd\u8981\u7684\u5c31\u662f\u4f9d\u8d56\u7ba1\u7406\u3002\u6240\u4ee5\u5f15\u5165BOM\u662f\u5fc5\u8981\u7684\u3002\u4e3b\u8981\u7ba1\u7406\u8be5starter\u7684\u6240\u6709\u6a21\u5757module\uff0c\u4ee5\u53castarter\u7684\u6240\u6709\u4f9d\u8d56\u751a\u81f3sms-spring-boot-autoconfigure\u90fd\u7531sms-spring-boot\u7ba1\u7406\u3002 3.2 autoconfigure \u00b6 \u8be5\u6a21\u5757\u4e3b\u8981\u7528\u6765\u5b9a\u4e49\u914d\u7f6e\u53c2\u6570\u3001\u4ee5\u53ca\u81ea\u52a8\u914d\u7f6e\u5bf9\u5916\u66b4\u9732\u7684\u529f\u80fd\uff08\u4e00\u822c\u662f\u62bd\u8c61\u7684\u63a5\u53e3Spring Bean\uff09\u3002 3.2.1 Properties\u914d\u7f6e \u00b6 \u4e00\u822c\u914d\u7f6e\u53c2\u6570\u90fd\u662f\u5728Spring Boot \u7684application.yml\u4e2d\u3002\u6211\u4eec\u4f1a\u5b9a\u4e49\u4e00\u4e2a\u524d\u7f00\u6807\u8bc6\u6765\u4f5c\u4e3a\u540d\u79f0\u7a7a\u95f4\u9694\u79bb\u5404\u4e2a\u7ec4\u4ef6\u7684\u53c2\u6570\u3002\u5bf9\u5e94\u7684\u7ec4\u4ef6\u4f1a\u5b9a\u4e49\u4e00\u4e2aXXXXProperties \u6765\u81ea\u52a8\u88c5\u914d\u8fd9\u4e9b\u53c2\u6570\u3002\u81ea\u52a8\u88c5\u914d\u7684\u673a\u5236\u57fa\u4e8e@ConfigurationProperties\u6ce8\u89e3\uff0c\u8bf7\u6ce8\u610f\u4e00\u5b9a\u8981\u663e\u5f0f\u58f0\u660e\u4f60\u914d\u7f6e\u7684\u524d\u7f00\u6807\u8bc6\uff08prefix\uff09\u3002\u6211\u4eec\u7684sms-spring-boot\u4f1a\u4f5c\u5982\u4e0b\u914d\u7f6e\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 import lombok.Data ; import org.springframework.boot.context.properties.ConfigurationProperties ; /** * \u77ed\u4fe1\u914d\u7f6e\u7c7b * * @author Dax * @since 10 :10 2019-04-03 */ @ConfigurationProperties ( prefix = SmsProperties . SMS_PREFIX ) @Data public class SmsProperties { /** * sms prefix. */ static final String SMS_PREFIX = \"sms\" ; private Aliyun aliyun ; /** * sms switch production is set to true, development set to false */ private boolean enabled ; /** * aliyun sms config. */ @Data public static class Aliyun { /** * aliyun sms sign name must not be null */ private String signName ; /** * aliyun sms access key */ private String accessKeyId ; /** * aliyun sms access key secret */ private String accessKeySecret ; } } \u4ee5\u4e0a\u4ee5\u963f\u91cc\u4e91\u7684\u77ed\u4fe1\u529f\u80fd\u4e3a\u4f8b\u4f5c\u914d\u7f6e\uff0c\u5728\u5c06\u6765\u4f7f\u7528\u65f6\u53ea\u9700\u8981\u5728application.yml\u4e2d\u52a0\u5165\u4e0a\u9762\u5bf9\u5e94SmsProperties\u7684\u914d\u7f6e\uff1a 1 2 3 4 5 6 sms : enabled : true aliyun : access-key-id : access-key-secret : sign-name : \u5982\u679c\u4f60\u96c6\u6210\u4e86Spring Boot \u6821\u9a8c\u5e93 \u4f60\u4e5f\u53ef\u4ee5\u5bf9SmsProperties\u8fdb\u884c\u6821\u9a8c\u3002\u5728\u914d\u7f6eapplication.yml\u65f6\u7ec6\u5fc3\u7684java\u5f00\u53d1\u8005\u4f1a\u53d1\u73b0\u53c2\u6570\u914d\u7f6e\u90fd\u6709\u50cf\u4e0b\u9762\u4e00\u6837\u7684\u53c2\u6570\u63cf\u8ff0: \u5c31\u50cfjava\u4e2d\u7684\u6ce8\u91ca\u4e00\u6837\u65b9\u4fbf\u6211\u4eec\u7406\u89e3\u8be5\u914d\u7f6e\u7684\u4f5c\u7528\uff0c\u5176\u5b9e\u8fd9\u4e2a\u5c31\u662fjava\u6ce8\u91ca\u751f\u6210\u7684\u3002\u4f60\u9700\u8981\u4f9d\u8d56 1 2 3 4 5 <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-autoconfigure </artifactId> <optional> true </optional> </dependency> \u7136\u540e\u5c31\u8be5\u4f9d\u8d56\u4f1a\u5bf9SmsProperties \u6210\u5458\u5c5e\u6027\u7684\u6ce8\u91ca\u8fdb\u884c\u63d0\u53d6\u751f\u6210\u4e00\u4e2aspring-configuration-metadata.json\u6587\u4ef6\uff0c\u8fd9\u5c31\u662f\u914d\u7f6e\u63cf\u8ff0\u7684\u5143\u6570\u636e\u6587\u4ef6\u3002Spring Boot\u5b98\u65b9\u4e5f\u5bf9\u6ce8\u91ca\u8fdb\u884c\u4e86\u4e00\u4e9b\u89c4\u5219\u7ea6\u675f\uff1a \u4e0d\u8981\u4ee5\u201cThe\u201d\u6216\u201cA\u201d\u5f00\u5934\u63cf\u8ff0\u3002 \u5bf9\u4e8eboolean\u7c7b\u578b\uff0c\u8bf7\u4f7f\u7528\u201cWhether\u201d \u6216\u201cEnable\u201d\u5f00\u59cb\u63cf\u8ff0\u3002 \u5bf9\u4e8e\u57fa\u4e8e\u96c6\u5408\u7684\u7c7b\u578b\uff0c\u8bf7\u4f7f\u7528\u201cComma-separated list\u201d \u5982\u679c\u9ed8\u8ba4\u65f6\u95f4\u5355\u4f4d\u4e0d\u7b49\u540c\u4e8e\u6beb\u79d2\uff0c\u5219\u4f7f\u7528java.time.Duration\u800c\u4e0d\u662flong\u63cf\u8ff0\u9ed8\u8ba4\u5355\u4f4d\uff0c\u4f8b\u5982\u201c\u5982\u679c\u672a\u6307\u5b9a\u6301\u7eed\u65f6\u95f4\u540e\u7f00\uff0c\u5219\u5c06\u4f7f\u7528\u79d2\u201d\u3002 \u9664\u975e\u5fc5\u987b\u5728\u8fd0\u884c\u65f6\u786e\u5b9a\uff0c\u5426\u5219\u4e0d\u8981\u5728\u63cf\u8ff0\u4e2d\u63d0\u4f9b\u9ed8\u8ba4\u503c\u3002 \u8865\u5145\u6211\u4e2a\u4eba\u5efa\u8bae\u63cf\u8ff0\u5c3d\u91cf\u4f7f\u7528\u82f1\u6587\u63cf\u8ff0\u3002 3.2.2 \u914d\u7f6e\u81ea\u52a8\u66b4\u9732\u529f\u80fd\u63a5\u53e3 \u00b6 \u62ff\u5230\u914d\u7f6e\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u6839\u636e\u914d\u7f6e\u6765\u521d\u59cb\u5316\u6211\u4eec\u7684\u529f\u80fd\u63a5\u53e3\uff0c\u6211\u4eec\u4f1a\u62bd\u8c61\u4e00\u4e2a\u77ed\u4fe1\u53d1\u9001\u63a5\u53e3SmsSender\uff0c\u6839\u636e\u77ed\u4fe1\u63d0\u4f9b\u65b9\u7684SDK\u6765\u8fdb\u884c\u529f\u80fd\u8bbe\u8ba1\u3002\u8bf7\u6ce8\u610fautoconfigure\u6a21\u5757\u7684\u4f9d\u8d56\u51e0\u4e4e\u90fd\u662f\u4e0d\u53ef\u4f20\u9012\u7684\u3002\u4e5f\u5c31\u662f\u4f9d\u8d56\u5750\u6807\u914d\u7f6eoptional\u4e3atrue \u3002\u529f\u80fd\u63a5\u53e3\u5b9e\u73b0\u5b8c\u540e\u6211\u4eec\u4f1a\u7f16\u5199\u4e00\u4e2a\u81ea\u52a8\u914d\u7f6e\u7c7b SmsAutoConfiguration \u3002\u9664\u4e86@Configuration\u6ce8\u89e3\u5916\uff0c@ConfigurationProperties\u4f1a\u5e2e\u52a9\u6211\u4eec\u5c06\u6211\u4eec\u7684\u914d\u7f6e\u7c7b SmsProperties\u52a0\u8f7d\u8fdb\u6765\u3002\u7136\u540e\u5c06\u6211\u4eec\u9700\u8981\u66b4\u9732\u7684\u529f\u80fd\u63a5\u53e3\u58f0\u660e\u4e3aSpring Bean \u66b4\u9732\u7ed9Spring Boot\u5e94\u7528 \u3002 \u6709\u65f6\u5019\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u6761\u4ef6\u6765\u63a7\u5236SmsAutoConfiguration\u6216\u8005SmsSender \uff0c\u6bd4\u5982\u6839\u636e\u67d0\u4e2a\u6761\u4ef6\u662f\u5426\u52a0\u8f7d\u6216\u52a0\u8f7d\u4e0d\u540c\u7684 SmsSender\u3002\u6709\u65f6\u95f4\u4f60\u53ef\u4ee5\u770b\u770bredis-starter\u5c31\u80fd\u5f88\u660e\u663e\u611f\u89c9\u5230\uff0c\u5b83\u4f1a\u6839\u636eluttuce\u3001redisson\u3001jedis \u7684\u53d8\u5316\u5b9e\u4f8b\u5316\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u94fe\u63a5\u3002\u5b9e\u73b0\u65b9\u5f0f\u662f\u4f7f\u7528\u4e86@Conditional\u7cfb\u5217\u6ce8\u89e3\uff0c\u6709\u65f6\u95f4\u53ef\u4ee5\u5b66\u4e60\u4e00\u4e0b\u8be5\u7cfb\u5217\u7684\u6ce8\u89e3\u3002\u597d\u4e86\u6211\u4eec\u7684SmsAutoConfiguration\u58f0\u660e\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 import cn.felord.boot.sms.autoconfigure.core.AliSmsSender ; import cn.felord.boot.sms.autoconfigure.core.SmsProperties ; import cn.felord.boot.sms.autoconfigure.core.SmsSender ; import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty ; import org.springframework.boot.context.properties.EnableConfigurationProperties ; import org.springframework.context.annotation.Bean ; import org.springframework.context.annotation.Configuration ; /** * The type Sms configuration. * * @author Dax * @since 11 :34 2019-04-03 */ @Configuration @EnableConfigurationProperties ( SmsProperties . class ) public class SmsAutoConfiguration { /** * Sms sender sms sender. * * @param smsProperties the sms properties * @return the sms sender */ @Bean @ConditionalOnProperty ( prefix = \"sms.aliyun\" , name = \"sign-name\" , matchIfMissing = false ) public SmsSender aliyunSmsSender ( SmsProperties smsProperties ) { SmsProperties . Aliyun aliyun = smsProperties . getAliyun (); return new AliSmsSender ( smsProperties . isEnabled (), aliyun . getSignName (), aliyun . getAccessKeyId (), aliyun . getAccessKeySecret ()); } } 3.2.3 \u4e3b\u52a8\u751f\u6548\u548c\u88ab\u52a8\u751f\u6548 \u00b6 starter\u96c6\u6210\u5165\u5e94\u7528\u6709\u4e24\u79cd\u65b9\u5f0f\u3002\u6211\u4eec\u4ece\u5e94\u7528\u89c6\u89d2\u6765\u770b\u6709\u4e24\u79cd\uff1a \u4e00\u79cd\u662f\u4e3b\u52a8\u751f\u6548\uff0c\u5728starter\u7ec4\u4ef6\u96c6\u6210\u5165Spring Boot\u5e94\u7528\u65f6\u9700\u8981\u4f60\u4e3b\u52a8\u58f0\u660e\u542f\u7528\u8be5starter\u624d\u751f\u6548\uff0c\u5373\u4f7f\u4f60\u914d\u7f6e\u5b8c\u5168\u3002\u8fd9\u91cc\u4f1a\u7528\u5230@Import\u6ce8\u89e3\uff0c\u5c06\u8be5\u6ce8\u89e3\u6807\u8bb0\u5230\u4f60\u81ea\u5b9a\u4e49\u7684@Enable\u6ce8\u89e3\u4e0a\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import cn.felord.boot.sms.autoconfigure.SmsAutoConfiguration ; import org.springframework.context.annotation.Import ; import java.lang.annotation.* ; /** * \u542f\u7528\u77ed\u4fe1\u606f\u914d\u7f6e * * @author Dax * @since 16:03 2019-05-15 */ @Target ( ElementType . TYPE ) @Retention ( RetentionPolicy . RUNTIME ) @Documented @Import ( SmsAutoConfiguration . class ) public @interface EnableSMS { } \u6211\u4eec\u5c06\u8be5\u6ce8\u89e3\u6807\u8bb0\u5165Spring Boot\u5e94\u7528\u5c31\u53ef\u4ee5\u4f7f\u7528\u77ed\u4fe1\u529f\u80fd\u4e86\u3002 \u53e6\u4e00\u79cd\u88ab\u52a8\u751f\u6548\uff0c\u5728starter\u7ec4\u4ef6\u96c6\u6210\u5165Spring Boot\u5e94\u7528\u65f6\u5c31\u5df2\u7ecf\u88ab\u5e94\u7528\u6355\u6349\u5230\u3002\u8fd9\u91cc\u4f1a\u7528\u5230\u7c7b\u4f3cjava\u7684SPI\u673a\u5236\u3002\u5728autoconfigure\u8d44\u6e90\u5305\u4e0b\u65b0\u5efaMETA-INF/spring.factories\u5199\u5165SmsAutoConfiguration\u5168\u9650\u5b9a\u540d\u3002 1 2 org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\ cn.felord.boot.sms.autoconfigure \u591a\u4e2a\u914d\u7f6e\u7c7b\u9017\u53f7\u9694\u5f00\uff0c\u6362\u884c\u4f7f\u7528\u53cd\u659c\u6760\u3002 3.3 sms-spring-boot-starter \u00b6 \u8be5\u6a21\u5757\u662f\u4e00\u4e2a\u7a7ajar\u3002\u5b83\u552f\u4e00\u76ee\u7684\u662f\u63d0\u4f9b\u5fc5\u8981\u7684\u4f9d\u8d56\u9879\u6765\u4f7f\u7528starter\u3002\u4f60\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u5c31\u662f\u96c6\u6210\u8be5starter\u529f\u80fd\u7684\u552f\u4e00\u5165\u53e3\u3002\u4e0d\u8981\u5bf9\u6dfb\u52a0\u542f\u52a8\u5668\u7684\u9879\u76ee\u505a\u51fa\u5047\u8bbe\u3002\u5982\u679c\u60a8\u81ea\u52a8\u914d\u7f6e\u7684\u4f9d\u8d56\u5e93\u901a\u5e38\u9700\u8981\u5176\u4ed6\u542f\u52a8\u5668\uff0c\u8bf7\u540c\u65f6\u63d0\u53ca\u5b83\u4eec\u3002\u5982\u679c\u53ef\u9009\u4f9d\u8d56\u9879\u7684\u6570\u91cf\u5f88\u9ad8\uff0c\u5219\u63d0\u4f9b\u4e00\u7ec4\u9002\u5f53\u7684\u9ed8\u8ba4\u4f9d\u8d56\u9879\u53ef\u80fd\u5f88\u96be\uff0c\u56e0\u4e3a\u60a8\u5e94\u8be5\u907f\u514d\u5305\u542b\u5bf9\u5178\u578b\u5e93\u7684\u4f7f\u7528\u4e0d\u5fc5\u8981\u7684\u4f9d\u8d56\u9879\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u60a8\u4e0d\u5e94\u8be5\u5305\u542b\u53ef\u9009\u7684\u4f9d\u8d56\u9879\u3002 \u65e0\u8bba\u54ea\u79cd\u65b9\u5f0f\uff0c\u60a8\u7684starter\u5fc5\u987b\u76f4\u63a5\u6216\u95f4\u63a5\u5f15\u7528\u6838\u5fc3Spring Boot\u542f\u52a8\u5668\uff08spring-boot-starter\uff09\uff08\u5982\u679c\u60a8\u7684\u542f\u52a8\u5668\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u542f\u52a8\u5668\uff0c\u5219\u65e0\u9700\u6dfb\u52a0\u5b83\uff09\u3002\u5982\u679c\u53ea\u4f7f\u7528\u81ea\u5b9a\u4e49\u542f\u52a8\u5668\u521b\u5efa\u9879\u76ee\uff0c\u5219Spring Boot\u7684\u6838\u5fc3\u529f\u80fd\u5c06\u901a\u8fc7\u6838\u5fc3\u542f\u52a8\u5668\u7684\u5b58\u5728\u6765\u5b9e\u73b0\u3002 \u6211\u4eec\u7684sms-spring-boot-starter\u4ec5\u4ec5\u662f\u4ee5\u4e0b\u7684pom\uff1a parent 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot </artifactId> <version> 1.0.0.RELEASE </version> <modules> <module> sms-spring-boot-autoconfigure </module> <module> sms-spring-boot-starter </module> </modules> <packaging> pom </packaging> <properties> <java.version> 1.8 </java.version> <spring-boot.version> 2.1.7.RELEASE </spring-boot.version> <aliyun-sms.version> 1.1.0 </aliyun-sms.version> <aliyun-sdk.version> 4.3.8 </aliyun-sdk.version> <lombok.version> 1.18.8 </lombok.version> <sms-starter.version> 1.0.0.RELEASE </sms-starter.version> </properties> <dependencyManagement> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-autoconfigure </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-configuration-processor </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-dysmsapi </artifactId> <version> ${aliyun-sms.version} </version> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-core </artifactId> <version> ${aliyun-sdk.version} </version> </dependency> <dependency> <groupId> org.projectlombok </groupId> <artifactId> lombok </artifactId> <version> ${lombok.version} </version> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-logging </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-autoconfigure </artifactId> <version> ${sms-starter.version} </version> </dependency> </dependencies> </dependencyManagement> </project> sms-spring-boot-starter 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-starter </artifactId> <version> 1.0.0.RELEASE </version> <dependencyManagement> <dependencies> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot </artifactId> <version> 1.0.0.RELEASE </version> <type> pom </type> <scope> import </scope> </dependency> </dependencies> </dependencyManagement> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter </artifactId> </dependency> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-autoconfigure </artifactId> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-dysmsapi </artifactId> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-core </artifactId> </dependency> </dependencies> </project> sms-spring-boot-autoconfigure 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-autoconfigure </artifactId> <version> 1.0.0.RELEASE </version> <packaging> jar </packaging> <dependencyManagement> <dependencies> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot </artifactId> <version> 1.0.0.RELEASE </version> <type> pom </type> <scope> import </scope> </dependency> </dependencies> </dependencyManagement> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-autoconfigure </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-configuration-processor </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-dysmsapi </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-core </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> org.projectlombok </groupId> <artifactId> lombok </artifactId> <scope> compile </scope> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-logging </artifactId> <scope> provided </scope> </dependency> </dependencies> </project> \u5230\u6b64\u4e3a\u6b62\uff0c\u6211\u4eec\u7684\u6574\u4e2a\u77ed\u4fe1Starter\u5c31\u5f00\u53d1\u5b8c\u6210\u4e86\u3002 4. \u603b\u7ed3 \u00b6 \u81ea\u5b9a\u4e49starter\u5bf9\u4e8e\u6211\u4eec\u9879\u76ee\u7ec4\u4ef6\u5316\u3001\u6a21\u5757\u5316\u662f\u6709\u5f88\u5927\u5e2e\u52a9\u7684\u3002\u540c\u65f6\u4e5f\u662fSpring Boot\u4e00\u5927\u7279\u8272\u3002\u76f8\u4fe1\u901a\u8fc7\u5c0f\u80d6\u7684\u4ecb\u7ecd\u4f60\u5df2\u7ecf\u8822\u8822\u6b32\u8bd5\u4e86\uff0c\u90a3\u4e48\u5c31\u8d76\u7d27\u5f00\u59cb\u5199\u4e00\u4e2a\u5427\u3002\u5982\u679c\u89c9\u5f97\u5bf9\u4f60\u6709\u7528\u53ef\u4ee5\u70b9\u4e2a\u8d5e\u5173\u6ce8\u4e00\u4e0b\u3002 sms-spring-boot-starter \u5df2\u7ecf\u4e0a\u4f20\u5230\u7801\u4e91\u4ed3\u5e93\uff0c\u8be5\u9879\u76ee\u7a0d\u52a0\u4fee\u6539\u5c31\u53ef\u4ee5\u4f7f\u7528\u5230\u751f\u4ea7\u3002 \u5730\u5740\uff1a https://gitee.com/felord/sms-spring-boot.git","title":"\u81ea\u5b9a\u4e49starter"},{"location":"self-define-starter/#1","text":"\u968f\u7740Spring\u7684\u65e5\u6e10\u81c3\u80bf\uff0c\u4e3a\u4e86\u7b80\u5316\u914d\u7f6e\u3001\u5f00\u7bb1\u5373\u7528\u3001\u5feb\u901f\u96c6\u6210\uff0cSpring Boot \u6a2a\u7a7a\u51fa\u4e16\u3002\u76ee\u524d\u5df2\u7ecf\u6210\u4e3a Java \u76ee\u524d\u6700\u706b\u70ed\u7684\u6846\u67b6\u4e86\u3002\u5e73\u5e38\u6211\u4eec\u7528Spring Boot\u5f00\u53d1web\u5e94\u7528\u3002Spring mvc \u9ed8\u8ba4\u4f7f\u7528tomcat servlet\u5bb9\u5668\uff0c \u56e0\u4e3aSpring mvc\u7ec4\u4ef6\u96c6\u6210\u4e86spring-boot-starter-tomcat \u3002\u4f46\u662f\u73b0\u5728undertow servlet\u5bb9\u5668\u7684\u6027\u80fd\u975e\u5e38\u597d\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5148\u6392\u9664tomcat\uff1a 1 2 3 4 5 6 7 8 9 10 <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-web </artifactId> <exclusions> <exclusion> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-tomcat </artifactId> </exclusion> </exclusions> </dependency> \u7136\u540e\u76f4\u63a5\u66ff\u6362\u4e3aundertow: 1 2 3 4 <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-undertow </artifactId> </dependency> \u4ee3\u7801\u65e0\u9700\u66f4\u6539\u3002\u8fd9\u5c31\u662f\u7ec4\u4ef6\u5316\u540e\u7684\u597d\u5904\uff1a1.\u53ef\u63d2\u62d4\u30022.\u53ef\u5b9a\u5236\u30023.\u6309\u9700\u96c6\u6210\u3002\u4e3a\u4ec0\u4e48\u80fd\u591f\u505a\u5230\u5feb\u901f\u9002\u914d\uff1f\u6211\u4eec\u8bd5\u60f3\u4e00\u4e2a\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\uff1a\u5047\u5982\u4f60\u7684\u6c7d\u8f66\u8f6e\u5b50\u4e0a\u6709\u4e2a\u87ba\u4e1d\u574f\u4e86\uff0c\u4f60\u8981\u4e70\u4e00\u4e2a\u87ba\u4e1d\u53bb\u81ea\u5df1\u88c5\u3002\u4f60\u53bb\u5e97\u91cc\u53ea\u8981\u62a5\u4e0a\u4f60\u6c7d\u8f66\u7684\u54c1\u724c\u548c\u4f4d\u7f6e\u8001\u677f\u5c31\u80fd\u51c6\u786e\u5730\u77e5\u9053\u4f60\u8981\u7528\u54ea\u79cd\u87ba\u4e1d\u3002\u8fd9\u5c31\u662f\u6807\u51c6\u5df2\u7ecf\u5236\u5b9a\u597d\u7684\u597d\u5904\u3002\u5982\u679c\u6ca1\u6709\u6807\u51c6\uff0c\u4f60\u5f88\u5bb9\u6613\u4e70\u5230\u4e0d\u914d\u5957\u7684\u87ba\u4e1d\uff0c\u4f60\u8981\u4e0d\u505c\u7684\u8bd5\u9519\u3002\u8fd9\u663e\u7136\u4e0d\u662f\u4f60\u60f3\u8981\u7684\u3002\u5982\u679c\u628a\u8fd9\u79cd\u6807\u51c6\u6f5c\u79fb\u9ed8\u5316\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u6c9f\u901a\u4e0a\u5c31\u66f4\u52a0\u5feb\u6377\u65b9\u4fbf\u3002\u6709\u65f6\u5019\u4f60\u5973\u670b\u53cb\u4e00\u4e2a\u773c\u795e\u4f60\u5c31\u77e5\u9053\u5979\u60f3\u8981\u5e72\u4ec0\u4e48\u3002\u6240\u4ee5Spring Boot \u6709\u4e00\u4e2a\u201c\u7ea6\u5b9a\u5927\u4e8e\u914d\u7f6e\u201d\u7684\u89c4\u5219\uff0c\u8ba9\u7a0b\u5e8f\u7ec4\u4ef6\u4e4b\u95f4\u6765\u51cf\u5c11\u914d\u7f6e\uff0c\u964d\u4f4e\u590d\u6742\u6027\u3002\u56e0\u6b64\u4f60\u5728\u5f00\u53d1\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684Spring Boot Starter\u7684\u65f6\u5019\u4e5f\u6700\u597d\u8003\u8651\u4f60\u7684starter\u5982\u4f55\u8fbe\u5230\u4ee5\u4e0a\u7684\u4fbf\u5229\u6027\u3002 \u4e00\u4e2a\u7ec4\u4ef6\u7684\u8bbe\u8ba1\u4e00\u5b9a\u8981\u6709\u6807\u51c6\u548c\u89c4\u5219\u3002Spring Boot Starter\u4e5f\u4e0d\u4f8b\u5916\u3002\u6211\u4eec\u6765\u770b\u770b\u4e00\u4e9b\u5e38\u89c4\u7684\u505a\u6cd5\u3002","title":"1. \u524d\u8a00"},{"location":"self-define-starter/#2-spring-boot","text":"\u4e00\u4e2a\u7ec4\u4ef6\u7684\u8bbe\u8ba1\u4e00\u5b9a\u8981\u6709\u6807\u51c6\u548c\u89c4\u5219\u3002Spring Boot Starter\u4e5f\u4e0d\u4f8b\u5916\u3002\u6211\u4eec\u6765\u770b\u770b\u4e00\u4e9b\u5e38\u89c4\u7684\u505a\u6cd5\u3002","title":"2. spring boot \u7684\u4e00\u4e9b\u7ea6\u5b9a"},{"location":"self-define-starter/#21","text":"\u5982\u679c\u4f60\u5feb\u6709\u5b69\u5b50\u4e86\uff0c\u51fa\u751f\u524d\u4f60\u6bd4\u8f83\u6025\u7684\u4e00\u5b9a\u662f\u8d77\u4e2a\u540d\u5b57\u3002\u59d3\u540d\u6807\u8bc6\u7740\u4f60\u548c\u4f60\u7231\u4eba\u7684\u8840\u7edf\uff0c\u4e00\u5b9a\u4e0d\u4f1a\u8d77\u9694\u58c1\u8001\u738b\u7684\u59d3\u6c0f\uff0c\u80af\u5b9a\u4f1a\u62db\u6765\u5f02\u6837\u7684\u773c\u5149\u3002\u5728maven\u4e2d\uff0cgroupId\u4ee3\u8868\u7740\u59d3\u6c0f\uff0cartifactId\u4ee3\u8868\u7740\u540d\u5b57\u3002Spring Boot\u4e5f\u662f\u6709\u4e00\u4e2a\u547d\u540d\u7684\u5efa\u8bae\u7684\u3002groupId\u4e0d\u8981\u7528\u5b98\u65b9\u7684org.springframework.boot \u800c\u8981\u7528\u4f60\u81ea\u5df1\u72ec\u7279\u7684\u3002\u5bf9\u4e8eartifactId\u7684\u547d\u540d\uff0cSpring Boot\u5b98\u65b9\u5efa\u8bae\u975e\u5b98\u65b9\u7684Starter\u547d\u540d\u683c\u5f0f\u9075\u5faa xxxx-spring-boot-starter \uff0c\u4f8b\u5982 mybatis-spring-boot-starter \u3002\u5b98\u65b9starter\u4f1a\u9075\u5faaspring-boot-starter-xxxx ,\u4f8b\u5982\u4e0a\u9762\u63d0\u5230\u7684spring-boot-starter-undertow \u3002\u5f88\u591a\u5f00\u6e90starter\u4f5c\u8005\u4f1a\u5ffd\u7565\u8fd9\u79cd\u7ea6\u5b9a\uff0c\u663e\u5f97\u4e0d\u591f\u201c\u4e13\u4e1a\u201c\u3002","title":"2.1 \u547d\u540d\u98ce\u683c"},{"location":"self-define-starter/#3-starter","text":"\u63a5\u4e0b\u6765\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u7b2c\u4e09\u65b9\u77ed\u4fe1starter\uff0c\u547d\u540d\u4e3asms-spring-boot-starter \u3002\u6709\u4e00\u4e9b\u7ec6\u8282\u95ee\u9898\u9700\u8981\u8fb9\u5199\u8fb9\u6765\u4ecb\u7ecd\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u7701\u7565\u4e86samples\u548ctest\u6a21\u5757\u6a21\u7248\uff1a","title":"3. \u81ea\u5b9a\u4e49\u4e00\u4e2aStarter"},{"location":"self-define-starter/#31-sms-spring-boot","text":"sms-spring-boot\u6784\u5efa\u4e00\u4e2a\u9879\u76ee\u91cd\u8981\u7684\u5c31\u662f\u4f9d\u8d56\u7ba1\u7406\u3002\u6240\u4ee5\u5f15\u5165BOM\u662f\u5fc5\u8981\u7684\u3002\u4e3b\u8981\u7ba1\u7406\u8be5starter\u7684\u6240\u6709\u6a21\u5757module\uff0c\u4ee5\u53castarter\u7684\u6240\u6709\u4f9d\u8d56\u751a\u81f3sms-spring-boot-autoconfigure\u90fd\u7531sms-spring-boot\u7ba1\u7406\u3002","title":"3.1 sms-spring-boot"},{"location":"self-define-starter/#32-autoconfigure","text":"\u8be5\u6a21\u5757\u4e3b\u8981\u7528\u6765\u5b9a\u4e49\u914d\u7f6e\u53c2\u6570\u3001\u4ee5\u53ca\u81ea\u52a8\u914d\u7f6e\u5bf9\u5916\u66b4\u9732\u7684\u529f\u80fd\uff08\u4e00\u822c\u662f\u62bd\u8c61\u7684\u63a5\u53e3Spring Bean\uff09\u3002","title":"3.2 autoconfigure"},{"location":"self-define-starter/#321-properties","text":"\u4e00\u822c\u914d\u7f6e\u53c2\u6570\u90fd\u662f\u5728Spring Boot \u7684application.yml\u4e2d\u3002\u6211\u4eec\u4f1a\u5b9a\u4e49\u4e00\u4e2a\u524d\u7f00\u6807\u8bc6\u6765\u4f5c\u4e3a\u540d\u79f0\u7a7a\u95f4\u9694\u79bb\u5404\u4e2a\u7ec4\u4ef6\u7684\u53c2\u6570\u3002\u5bf9\u5e94\u7684\u7ec4\u4ef6\u4f1a\u5b9a\u4e49\u4e00\u4e2aXXXXProperties \u6765\u81ea\u52a8\u88c5\u914d\u8fd9\u4e9b\u53c2\u6570\u3002\u81ea\u52a8\u88c5\u914d\u7684\u673a\u5236\u57fa\u4e8e@ConfigurationProperties\u6ce8\u89e3\uff0c\u8bf7\u6ce8\u610f\u4e00\u5b9a\u8981\u663e\u5f0f\u58f0\u660e\u4f60\u914d\u7f6e\u7684\u524d\u7f00\u6807\u8bc6\uff08prefix\uff09\u3002\u6211\u4eec\u7684sms-spring-boot\u4f1a\u4f5c\u5982\u4e0b\u914d\u7f6e\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 import lombok.Data ; import org.springframework.boot.context.properties.ConfigurationProperties ; /** * \u77ed\u4fe1\u914d\u7f6e\u7c7b * * @author Dax * @since 10 :10 2019-04-03 */ @ConfigurationProperties ( prefix = SmsProperties . SMS_PREFIX ) @Data public class SmsProperties { /** * sms prefix. */ static final String SMS_PREFIX = \"sms\" ; private Aliyun aliyun ; /** * sms switch production is set to true, development set to false */ private boolean enabled ; /** * aliyun sms config. */ @Data public static class Aliyun { /** * aliyun sms sign name must not be null */ private String signName ; /** * aliyun sms access key */ private String accessKeyId ; /** * aliyun sms access key secret */ private String accessKeySecret ; } } \u4ee5\u4e0a\u4ee5\u963f\u91cc\u4e91\u7684\u77ed\u4fe1\u529f\u80fd\u4e3a\u4f8b\u4f5c\u914d\u7f6e\uff0c\u5728\u5c06\u6765\u4f7f\u7528\u65f6\u53ea\u9700\u8981\u5728application.yml\u4e2d\u52a0\u5165\u4e0a\u9762\u5bf9\u5e94SmsProperties\u7684\u914d\u7f6e\uff1a 1 2 3 4 5 6 sms : enabled : true aliyun : access-key-id : access-key-secret : sign-name : \u5982\u679c\u4f60\u96c6\u6210\u4e86Spring Boot \u6821\u9a8c\u5e93 \u4f60\u4e5f\u53ef\u4ee5\u5bf9SmsProperties\u8fdb\u884c\u6821\u9a8c\u3002\u5728\u914d\u7f6eapplication.yml\u65f6\u7ec6\u5fc3\u7684java\u5f00\u53d1\u8005\u4f1a\u53d1\u73b0\u53c2\u6570\u914d\u7f6e\u90fd\u6709\u50cf\u4e0b\u9762\u4e00\u6837\u7684\u53c2\u6570\u63cf\u8ff0: \u5c31\u50cfjava\u4e2d\u7684\u6ce8\u91ca\u4e00\u6837\u65b9\u4fbf\u6211\u4eec\u7406\u89e3\u8be5\u914d\u7f6e\u7684\u4f5c\u7528\uff0c\u5176\u5b9e\u8fd9\u4e2a\u5c31\u662fjava\u6ce8\u91ca\u751f\u6210\u7684\u3002\u4f60\u9700\u8981\u4f9d\u8d56 1 2 3 4 5 <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-autoconfigure </artifactId> <optional> true </optional> </dependency> \u7136\u540e\u5c31\u8be5\u4f9d\u8d56\u4f1a\u5bf9SmsProperties \u6210\u5458\u5c5e\u6027\u7684\u6ce8\u91ca\u8fdb\u884c\u63d0\u53d6\u751f\u6210\u4e00\u4e2aspring-configuration-metadata.json\u6587\u4ef6\uff0c\u8fd9\u5c31\u662f\u914d\u7f6e\u63cf\u8ff0\u7684\u5143\u6570\u636e\u6587\u4ef6\u3002Spring Boot\u5b98\u65b9\u4e5f\u5bf9\u6ce8\u91ca\u8fdb\u884c\u4e86\u4e00\u4e9b\u89c4\u5219\u7ea6\u675f\uff1a \u4e0d\u8981\u4ee5\u201cThe\u201d\u6216\u201cA\u201d\u5f00\u5934\u63cf\u8ff0\u3002 \u5bf9\u4e8eboolean\u7c7b\u578b\uff0c\u8bf7\u4f7f\u7528\u201cWhether\u201d \u6216\u201cEnable\u201d\u5f00\u59cb\u63cf\u8ff0\u3002 \u5bf9\u4e8e\u57fa\u4e8e\u96c6\u5408\u7684\u7c7b\u578b\uff0c\u8bf7\u4f7f\u7528\u201cComma-separated list\u201d \u5982\u679c\u9ed8\u8ba4\u65f6\u95f4\u5355\u4f4d\u4e0d\u7b49\u540c\u4e8e\u6beb\u79d2\uff0c\u5219\u4f7f\u7528java.time.Duration\u800c\u4e0d\u662flong\u63cf\u8ff0\u9ed8\u8ba4\u5355\u4f4d\uff0c\u4f8b\u5982\u201c\u5982\u679c\u672a\u6307\u5b9a\u6301\u7eed\u65f6\u95f4\u540e\u7f00\uff0c\u5219\u5c06\u4f7f\u7528\u79d2\u201d\u3002 \u9664\u975e\u5fc5\u987b\u5728\u8fd0\u884c\u65f6\u786e\u5b9a\uff0c\u5426\u5219\u4e0d\u8981\u5728\u63cf\u8ff0\u4e2d\u63d0\u4f9b\u9ed8\u8ba4\u503c\u3002 \u8865\u5145\u6211\u4e2a\u4eba\u5efa\u8bae\u63cf\u8ff0\u5c3d\u91cf\u4f7f\u7528\u82f1\u6587\u63cf\u8ff0\u3002","title":"3.2.1 Properties\u914d\u7f6e"},{"location":"self-define-starter/#322","text":"\u62ff\u5230\u914d\u7f6e\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u6839\u636e\u914d\u7f6e\u6765\u521d\u59cb\u5316\u6211\u4eec\u7684\u529f\u80fd\u63a5\u53e3\uff0c\u6211\u4eec\u4f1a\u62bd\u8c61\u4e00\u4e2a\u77ed\u4fe1\u53d1\u9001\u63a5\u53e3SmsSender\uff0c\u6839\u636e\u77ed\u4fe1\u63d0\u4f9b\u65b9\u7684SDK\u6765\u8fdb\u884c\u529f\u80fd\u8bbe\u8ba1\u3002\u8bf7\u6ce8\u610fautoconfigure\u6a21\u5757\u7684\u4f9d\u8d56\u51e0\u4e4e\u90fd\u662f\u4e0d\u53ef\u4f20\u9012\u7684\u3002\u4e5f\u5c31\u662f\u4f9d\u8d56\u5750\u6807\u914d\u7f6eoptional\u4e3atrue \u3002\u529f\u80fd\u63a5\u53e3\u5b9e\u73b0\u5b8c\u540e\u6211\u4eec\u4f1a\u7f16\u5199\u4e00\u4e2a\u81ea\u52a8\u914d\u7f6e\u7c7b SmsAutoConfiguration \u3002\u9664\u4e86@Configuration\u6ce8\u89e3\u5916\uff0c@ConfigurationProperties\u4f1a\u5e2e\u52a9\u6211\u4eec\u5c06\u6211\u4eec\u7684\u914d\u7f6e\u7c7b SmsProperties\u52a0\u8f7d\u8fdb\u6765\u3002\u7136\u540e\u5c06\u6211\u4eec\u9700\u8981\u66b4\u9732\u7684\u529f\u80fd\u63a5\u53e3\u58f0\u660e\u4e3aSpring Bean \u66b4\u9732\u7ed9Spring Boot\u5e94\u7528 \u3002 \u6709\u65f6\u5019\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u6761\u4ef6\u6765\u63a7\u5236SmsAutoConfiguration\u6216\u8005SmsSender \uff0c\u6bd4\u5982\u6839\u636e\u67d0\u4e2a\u6761\u4ef6\u662f\u5426\u52a0\u8f7d\u6216\u52a0\u8f7d\u4e0d\u540c\u7684 SmsSender\u3002\u6709\u65f6\u95f4\u4f60\u53ef\u4ee5\u770b\u770bredis-starter\u5c31\u80fd\u5f88\u660e\u663e\u611f\u89c9\u5230\uff0c\u5b83\u4f1a\u6839\u636eluttuce\u3001redisson\u3001jedis \u7684\u53d8\u5316\u5b9e\u4f8b\u5316\u4e0d\u540c\u7684\u5ba2\u6237\u7aef\u94fe\u63a5\u3002\u5b9e\u73b0\u65b9\u5f0f\u662f\u4f7f\u7528\u4e86@Conditional\u7cfb\u5217\u6ce8\u89e3\uff0c\u6709\u65f6\u95f4\u53ef\u4ee5\u5b66\u4e60\u4e00\u4e0b\u8be5\u7cfb\u5217\u7684\u6ce8\u89e3\u3002\u597d\u4e86\u6211\u4eec\u7684SmsAutoConfiguration\u58f0\u660e\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 import cn.felord.boot.sms.autoconfigure.core.AliSmsSender ; import cn.felord.boot.sms.autoconfigure.core.SmsProperties ; import cn.felord.boot.sms.autoconfigure.core.SmsSender ; import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty ; import org.springframework.boot.context.properties.EnableConfigurationProperties ; import org.springframework.context.annotation.Bean ; import org.springframework.context.annotation.Configuration ; /** * The type Sms configuration. * * @author Dax * @since 11 :34 2019-04-03 */ @Configuration @EnableConfigurationProperties ( SmsProperties . class ) public class SmsAutoConfiguration { /** * Sms sender sms sender. * * @param smsProperties the sms properties * @return the sms sender */ @Bean @ConditionalOnProperty ( prefix = \"sms.aliyun\" , name = \"sign-name\" , matchIfMissing = false ) public SmsSender aliyunSmsSender ( SmsProperties smsProperties ) { SmsProperties . Aliyun aliyun = smsProperties . getAliyun (); return new AliSmsSender ( smsProperties . isEnabled (), aliyun . getSignName (), aliyun . getAccessKeyId (), aliyun . getAccessKeySecret ()); } }","title":"3.2.2 \u914d\u7f6e\u81ea\u52a8\u66b4\u9732\u529f\u80fd\u63a5\u53e3"},{"location":"self-define-starter/#323","text":"starter\u96c6\u6210\u5165\u5e94\u7528\u6709\u4e24\u79cd\u65b9\u5f0f\u3002\u6211\u4eec\u4ece\u5e94\u7528\u89c6\u89d2\u6765\u770b\u6709\u4e24\u79cd\uff1a \u4e00\u79cd\u662f\u4e3b\u52a8\u751f\u6548\uff0c\u5728starter\u7ec4\u4ef6\u96c6\u6210\u5165Spring Boot\u5e94\u7528\u65f6\u9700\u8981\u4f60\u4e3b\u52a8\u58f0\u660e\u542f\u7528\u8be5starter\u624d\u751f\u6548\uff0c\u5373\u4f7f\u4f60\u914d\u7f6e\u5b8c\u5168\u3002\u8fd9\u91cc\u4f1a\u7528\u5230@Import\u6ce8\u89e3\uff0c\u5c06\u8be5\u6ce8\u89e3\u6807\u8bb0\u5230\u4f60\u81ea\u5b9a\u4e49\u7684@Enable\u6ce8\u89e3\u4e0a\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import cn.felord.boot.sms.autoconfigure.SmsAutoConfiguration ; import org.springframework.context.annotation.Import ; import java.lang.annotation.* ; /** * \u542f\u7528\u77ed\u4fe1\u606f\u914d\u7f6e * * @author Dax * @since 16:03 2019-05-15 */ @Target ( ElementType . TYPE ) @Retention ( RetentionPolicy . RUNTIME ) @Documented @Import ( SmsAutoConfiguration . class ) public @interface EnableSMS { } \u6211\u4eec\u5c06\u8be5\u6ce8\u89e3\u6807\u8bb0\u5165Spring Boot\u5e94\u7528\u5c31\u53ef\u4ee5\u4f7f\u7528\u77ed\u4fe1\u529f\u80fd\u4e86\u3002 \u53e6\u4e00\u79cd\u88ab\u52a8\u751f\u6548\uff0c\u5728starter\u7ec4\u4ef6\u96c6\u6210\u5165Spring Boot\u5e94\u7528\u65f6\u5c31\u5df2\u7ecf\u88ab\u5e94\u7528\u6355\u6349\u5230\u3002\u8fd9\u91cc\u4f1a\u7528\u5230\u7c7b\u4f3cjava\u7684SPI\u673a\u5236\u3002\u5728autoconfigure\u8d44\u6e90\u5305\u4e0b\u65b0\u5efaMETA-INF/spring.factories\u5199\u5165SmsAutoConfiguration\u5168\u9650\u5b9a\u540d\u3002 1 2 org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\ cn.felord.boot.sms.autoconfigure \u591a\u4e2a\u914d\u7f6e\u7c7b\u9017\u53f7\u9694\u5f00\uff0c\u6362\u884c\u4f7f\u7528\u53cd\u659c\u6760\u3002","title":"3.2.3 \u4e3b\u52a8\u751f\u6548\u548c\u88ab\u52a8\u751f\u6548"},{"location":"self-define-starter/#33-sms-spring-boot-starter","text":"\u8be5\u6a21\u5757\u662f\u4e00\u4e2a\u7a7ajar\u3002\u5b83\u552f\u4e00\u76ee\u7684\u662f\u63d0\u4f9b\u5fc5\u8981\u7684\u4f9d\u8d56\u9879\u6765\u4f7f\u7528starter\u3002\u4f60\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u5c31\u662f\u96c6\u6210\u8be5starter\u529f\u80fd\u7684\u552f\u4e00\u5165\u53e3\u3002\u4e0d\u8981\u5bf9\u6dfb\u52a0\u542f\u52a8\u5668\u7684\u9879\u76ee\u505a\u51fa\u5047\u8bbe\u3002\u5982\u679c\u60a8\u81ea\u52a8\u914d\u7f6e\u7684\u4f9d\u8d56\u5e93\u901a\u5e38\u9700\u8981\u5176\u4ed6\u542f\u52a8\u5668\uff0c\u8bf7\u540c\u65f6\u63d0\u53ca\u5b83\u4eec\u3002\u5982\u679c\u53ef\u9009\u4f9d\u8d56\u9879\u7684\u6570\u91cf\u5f88\u9ad8\uff0c\u5219\u63d0\u4f9b\u4e00\u7ec4\u9002\u5f53\u7684\u9ed8\u8ba4\u4f9d\u8d56\u9879\u53ef\u80fd\u5f88\u96be\uff0c\u56e0\u4e3a\u60a8\u5e94\u8be5\u907f\u514d\u5305\u542b\u5bf9\u5178\u578b\u5e93\u7684\u4f7f\u7528\u4e0d\u5fc5\u8981\u7684\u4f9d\u8d56\u9879\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u60a8\u4e0d\u5e94\u8be5\u5305\u542b\u53ef\u9009\u7684\u4f9d\u8d56\u9879\u3002 \u65e0\u8bba\u54ea\u79cd\u65b9\u5f0f\uff0c\u60a8\u7684starter\u5fc5\u987b\u76f4\u63a5\u6216\u95f4\u63a5\u5f15\u7528\u6838\u5fc3Spring Boot\u542f\u52a8\u5668\uff08spring-boot-starter\uff09\uff08\u5982\u679c\u60a8\u7684\u542f\u52a8\u5668\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u542f\u52a8\u5668\uff0c\u5219\u65e0\u9700\u6dfb\u52a0\u5b83\uff09\u3002\u5982\u679c\u53ea\u4f7f\u7528\u81ea\u5b9a\u4e49\u542f\u52a8\u5668\u521b\u5efa\u9879\u76ee\uff0c\u5219Spring Boot\u7684\u6838\u5fc3\u529f\u80fd\u5c06\u901a\u8fc7\u6838\u5fc3\u542f\u52a8\u5668\u7684\u5b58\u5728\u6765\u5b9e\u73b0\u3002 \u6211\u4eec\u7684sms-spring-boot-starter\u4ec5\u4ec5\u662f\u4ee5\u4e0b\u7684pom\uff1a parent 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot </artifactId> <version> 1.0.0.RELEASE </version> <modules> <module> sms-spring-boot-autoconfigure </module> <module> sms-spring-boot-starter </module> </modules> <packaging> pom </packaging> <properties> <java.version> 1.8 </java.version> <spring-boot.version> 2.1.7.RELEASE </spring-boot.version> <aliyun-sms.version> 1.1.0 </aliyun-sms.version> <aliyun-sdk.version> 4.3.8 </aliyun-sdk.version> <lombok.version> 1.18.8 </lombok.version> <sms-starter.version> 1.0.0.RELEASE </sms-starter.version> </properties> <dependencyManagement> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-autoconfigure </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-configuration-processor </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-dysmsapi </artifactId> <version> ${aliyun-sms.version} </version> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-core </artifactId> <version> ${aliyun-sdk.version} </version> </dependency> <dependency> <groupId> org.projectlombok </groupId> <artifactId> lombok </artifactId> <version> ${lombok.version} </version> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-logging </artifactId> <version> ${spring-boot.version} </version> </dependency> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-autoconfigure </artifactId> <version> ${sms-starter.version} </version> </dependency> </dependencies> </dependencyManagement> </project> sms-spring-boot-starter 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-starter </artifactId> <version> 1.0.0.RELEASE </version> <dependencyManagement> <dependencies> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot </artifactId> <version> 1.0.0.RELEASE </version> <type> pom </type> <scope> import </scope> </dependency> </dependencies> </dependencyManagement> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter </artifactId> </dependency> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-autoconfigure </artifactId> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-dysmsapi </artifactId> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-core </artifactId> </dependency> </dependencies> </project> sms-spring-boot-autoconfigure 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 <?xml version=\"1.0\" encoding=\"UTF-8\"?> <project xmlns= \"http://maven.apache.org/POM/4.0.0\" xmlns:xsi= \"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation= \"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" > <modelVersion> 4.0.0 </modelVersion> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot-autoconfigure </artifactId> <version> 1.0.0.RELEASE </version> <packaging> jar </packaging> <dependencyManagement> <dependencies> <dependency> <groupId> cn.felord.boot </groupId> <artifactId> sms-spring-boot </artifactId> <version> 1.0.0.RELEASE </version> <type> pom </type> <scope> import </scope> </dependency> </dependencies> </dependencyManagement> <dependencies> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-autoconfigure </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-configuration-processor </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-dysmsapi </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> com.aliyun </groupId> <artifactId> aliyun-java-sdk-core </artifactId> <optional> true </optional> </dependency> <dependency> <groupId> org.projectlombok </groupId> <artifactId> lombok </artifactId> <scope> compile </scope> </dependency> <dependency> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-logging </artifactId> <scope> provided </scope> </dependency> </dependencies> </project> \u5230\u6b64\u4e3a\u6b62\uff0c\u6211\u4eec\u7684\u6574\u4e2a\u77ed\u4fe1Starter\u5c31\u5f00\u53d1\u5b8c\u6210\u4e86\u3002","title":"3.3 sms-spring-boot-starter"},{"location":"self-define-starter/#4","text":"\u81ea\u5b9a\u4e49starter\u5bf9\u4e8e\u6211\u4eec\u9879\u76ee\u7ec4\u4ef6\u5316\u3001\u6a21\u5757\u5316\u662f\u6709\u5f88\u5927\u5e2e\u52a9\u7684\u3002\u540c\u65f6\u4e5f\u662fSpring Boot\u4e00\u5927\u7279\u8272\u3002\u76f8\u4fe1\u901a\u8fc7\u5c0f\u80d6\u7684\u4ecb\u7ecd\u4f60\u5df2\u7ecf\u8822\u8822\u6b32\u8bd5\u4e86\uff0c\u90a3\u4e48\u5c31\u8d76\u7d27\u5f00\u59cb\u5199\u4e00\u4e2a\u5427\u3002\u5982\u679c\u89c9\u5f97\u5bf9\u4f60\u6709\u7528\u53ef\u4ee5\u70b9\u4e2a\u8d5e\u5173\u6ce8\u4e00\u4e0b\u3002 sms-spring-boot-starter \u5df2\u7ecf\u4e0a\u4f20\u5230\u7801\u4e91\u4ed3\u5e93\uff0c\u8be5\u9879\u76ee\u7a0d\u52a0\u4fee\u6539\u5c31\u53ef\u4ee5\u4f7f\u7528\u5230\u751f\u4ea7\u3002 \u5730\u5740\uff1a https://gitee.com/felord/sms-spring-boot.git","title":"4. \u603b\u7ed3"},{"location":"springboot-profile/","text":"springboot\u83b7\u53d6active profile \u00b6 \u5982\u4f55\u901a\u8fc7\u4ee3\u7801\u83b7\u53d6\u5f53\u524d\u6fc0\u6d3b\u7684profile \u4e0d\u540c\u7684profile\u73af\u5883\u4e0b\u8fd0\u884c\u4e0d\u540c\u7684code \u65b9\u5f0f\u4e00 \u00b6 1 2 WebApplicationContext wac = WebApplicationContextUtils . getWebApplicationContext ( request . getServletContext ()); String profile = wac . getEnvironment (). getActiveProfiles ()[ 0 ]; \u65b9\u5f0f\u4e8c \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.context.ApplicationContext ; import org.springframework.context.annotation.Configuration ; /** * @author wangjiuzhou (835540436@qq.com) * @date 2018/11/07 * * \u83b7\u53d6\u5f53\u524d\u9879\u76ee\u73af\u5883\uff1alocal\u3001dev\u3001test\u3001pro */ @Configuration public class ProfileConfig { public static final String LOCAL_PROFILE = \"local\" ; public static final String DEV_PROFILE = \"dev\" ; public static final String TEST_PROFILE = \"test\" ; public static final String PRO_PROFILE = \"pro\" ; @Autowired private ApplicationContext context ; public String getActiveProfile () { return context . getEnvironment (). getActiveProfiles ()[ 0 ]; } } \u65b9\u5f0f\u4e09 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 @Component public class SpringContextUtil implements ApplicationContextAware { private static ApplicationContext context = null ; @Override public void setApplicationContext ( ApplicationContext applicationContext ) throws BeansException { context = applicationContext ; } //\u83b7\u53d6applicationContext public static ApplicationContext getApplicationContext () { return applicationContext ; } //\u901a\u8fc7name\u83b7\u53d6 Bean. public static Object getBean ( String name ){ return getApplicationContext (). getBean ( name ); } //\u901a\u8fc7class\u83b7\u53d6Bean. public static < T > T getBean ( Class < T > clazz ){ return getApplicationContext (). getBean ( clazz ); } //\u901a\u8fc7name,\u4ee5\u53caClazz\u8fd4\u56de\u6307\u5b9a\u7684Bean public static < T > T getBean ( String name , Class < T > clazz ){ return getApplicationContext (). getBean ( name , clazz ); } // \u56fd\u9645\u5316\u4f7f\u7528 public static String getMessage ( String key ) { return context . getMessage ( key , null , Locale . getDefault ()); } // \u83b7\u53d6\u5f53\u524d\u73af\u5883 public static String getActiveProfile () { return context . getEnvironment (). getActiveProfiles ()[ 0 ]; } }","title":"springboot\u83b7\u53d6profile"},{"location":"springboot-profile/#springbootactive-profile","text":"\u5982\u4f55\u901a\u8fc7\u4ee3\u7801\u83b7\u53d6\u5f53\u524d\u6fc0\u6d3b\u7684profile \u4e0d\u540c\u7684profile\u73af\u5883\u4e0b\u8fd0\u884c\u4e0d\u540c\u7684code","title":"springboot\u83b7\u53d6active profile"},{"location":"springboot-profile/#_1","text":"1 2 WebApplicationContext wac = WebApplicationContextUtils . getWebApplicationContext ( request . getServletContext ()); String profile = wac . getEnvironment (). getActiveProfiles ()[ 0 ];","title":"\u65b9\u5f0f\u4e00"},{"location":"springboot-profile/#_2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import org.springframework.beans.factory.annotation.Autowired ; import org.springframework.context.ApplicationContext ; import org.springframework.context.annotation.Configuration ; /** * @author wangjiuzhou (835540436@qq.com) * @date 2018/11/07 * * \u83b7\u53d6\u5f53\u524d\u9879\u76ee\u73af\u5883\uff1alocal\u3001dev\u3001test\u3001pro */ @Configuration public class ProfileConfig { public static final String LOCAL_PROFILE = \"local\" ; public static final String DEV_PROFILE = \"dev\" ; public static final String TEST_PROFILE = \"test\" ; public static final String PRO_PROFILE = \"pro\" ; @Autowired private ApplicationContext context ; public String getActiveProfile () { return context . getEnvironment (). getActiveProfiles ()[ 0 ]; } }","title":"\u65b9\u5f0f\u4e8c"},{"location":"springboot-profile/#_3","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 @Component public class SpringContextUtil implements ApplicationContextAware { private static ApplicationContext context = null ; @Override public void setApplicationContext ( ApplicationContext applicationContext ) throws BeansException { context = applicationContext ; } //\u83b7\u53d6applicationContext public static ApplicationContext getApplicationContext () { return applicationContext ; } //\u901a\u8fc7name\u83b7\u53d6 Bean. public static Object getBean ( String name ){ return getApplicationContext (). getBean ( name ); } //\u901a\u8fc7class\u83b7\u53d6Bean. public static < T > T getBean ( Class < T > clazz ){ return getApplicationContext (). getBean ( clazz ); } //\u901a\u8fc7name,\u4ee5\u53caClazz\u8fd4\u56de\u6307\u5b9a\u7684Bean public static < T > T getBean ( String name , Class < T > clazz ){ return getApplicationContext (). getBean ( name , clazz ); } // \u56fd\u9645\u5316\u4f7f\u7528 public static String getMessage ( String key ) { return context . getMessage ( key , null , Locale . getDefault ()); } // \u83b7\u53d6\u5f53\u524d\u73af\u5883 public static String getActiveProfile () { return context . getEnvironment (). getActiveProfiles ()[ 0 ]; } }","title":"\u65b9\u5f0f\u4e09"}]}